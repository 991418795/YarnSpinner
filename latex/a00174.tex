\hypertarget{a00174}{\section{Yarn.\-Yarn\-Spinner\-Console Class Reference}
\label{a00174}\index{Yarn.\-Yarn\-Spinner\-Console@{Yarn.\-Yarn\-Spinner\-Console}}
}


Collaboration diagram for Yarn.\-Yarn\-Spinner\-Console\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=226pt]{a00669}
\end{center}
\end{figure}
\subsection*{Classes}
\begin{DoxyCompactItemize}
\item 
class \hyperlink{a00055}{Console\-Runner\-Implementation}
\end{DoxyCompactItemize}
\subsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
static void \hyperlink{a00174_a2f63f9f5b7634cb50ee75ff2eb18b137}{Error} (params string\mbox{[}$\,$\mbox{]} messages)
\item 
static void \hyperlink{a00174_a939cc9e943c574b36c6af93e9c772702}{Note} (params string\mbox{[}$\,$\mbox{]} messages)
\item 
static void \hyperlink{a00174_a979bb6f049b6c5294f745a19e24ddd9d}{Warn} (params string\mbox{[}$\,$\mbox{]} messages)
\item 
static void \hyperlink{a00174_a1d71ff2eb190449ea1d42ce86f44489f}{Main} (string\mbox{[}$\,$\mbox{]} args)
\end{DoxyCompactItemize}
\subsection*{Static Package Functions}
\begin{DoxyCompactItemize}
\item 
static \hyperlink{a00090}{Dialogue} \hyperlink{a00174_aff69d6e16dddb077f87a616a57cd3c66}{Create\-Dialogue\-For\-Utilities} ()
\item 
static void \hyperlink{a00174_ad77564b25725a771f0fd4da430582e6f}{Check\-File\-List} (I\-List$<$ string $>$ paths, List$<$ string $>$ allowed\-Extensions)
\item 
static \hyperlink{a00090}{Dialogue} \hyperlink{a00174_aab244361a510cee18ad2f636d110e0d5}{Create\-Dialogue} (\hyperlink{a00101}{Execution\-Options} options, \hyperlink{a00055}{Console\-Runner\-Implementation} impl)
\end{DoxyCompactItemize}
\subsection*{Static Package Attributes}
\begin{DoxyCompactItemize}
\item 
static List$<$ string $>$ \hyperlink{a00174_a0979de7ea02c8c0375b8220a12e6575e}{A\-L\-L\-O\-W\-E\-D\-\_\-\-E\-X\-T\-E\-N\-S\-I\-O\-N\-S} = new List$<$string$>$(new string\mbox{[}$\,$\mbox{]} \{ \char`\"{}.node\char`\"{}, \char`\"{}.yarn.\-bytes\char`\"{}, \char`\"{}.yarn.\-txt\char`\"{} \})
\end{DoxyCompactItemize}
\subsection*{Static Private Member Functions}
\begin{DoxyCompactItemize}
\item 
static int \hyperlink{a00174_a1b974c55540795a9e643c2ec055fbd51}{Run} (\hyperlink{a00144}{Run\-Options} options)
\item 
static int \hyperlink{a00174_a029a5624e7cc3a16ae586b64f13049de}{Verify} (\hyperlink{a00171}{Verify\-Options} options)
\end{DoxyCompactItemize}


\subsection{Detailed Description}


Definition at line 138 of file Main.\-cs.



\subsection{Member Function Documentation}
\hypertarget{a00174_ad77564b25725a771f0fd4da430582e6f}{\index{Yarn\-::\-Yarn\-Spinner\-Console@{Yarn\-::\-Yarn\-Spinner\-Console}!Check\-File\-List@{Check\-File\-List}}
\index{Check\-File\-List@{Check\-File\-List}!Yarn::YarnSpinnerConsole@{Yarn\-::\-Yarn\-Spinner\-Console}}
\subsubsection[{Check\-File\-List}]{\setlength{\rightskip}{0pt plus 5cm}static void Yarn.\-Yarn\-Spinner\-Console.\-Check\-File\-List (
\begin{DoxyParamCaption}
\item[{I\-List$<$ string $>$}]{paths, }
\item[{List$<$ string $>$}]{allowed\-Extensions}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}, {\ttfamily [package]}}}\label{a00174_ad77564b25725a771f0fd4da430582e6f}


Definition at line 202 of file Main.\-cs.



References Yarn.\-Yarn\-Spinner\-Console.\-Error(), and Yarn.\-Yarn\-Spinner\-Console.\-Warn().



Referenced by Yarn.\-Yarn\-Spinner\-Console.\-Run(), and Yarn.\-Yarn\-Spinner\-Console.\-Verify().


\begin{DoxyCode}
203         \{
204 
205             \textcolor{keywordflow}{if} (paths.Count == 0)
206             \{
207                 \hyperlink{a00174_a979bb6f049b6c5294f745a19e24ddd9d}{Warn}(\textcolor{stringliteral}{"No files provided."});
208                 \textcolor{keywordflow}{return};
209             \}
210 
211             var invalid = \textcolor{keyword}{new} List<string>();
212 
213             \textcolor{keywordflow}{foreach} (var path \textcolor{keywordflow}{in} paths)
214             \{
215                 \textcolor{comment}{// Does this file exist?}
216                 var exists = System.IO.File.Exists(path);
217 
218                 \textcolor{comment}{// Does this file have the right extension?}
219 
220                 var hasAllowedExtension = allowedExtensions.FindIndex(item => path.EndsWith(item, 
      StringComparison.InvariantCulture)) != -1;
221 
222                 \textcolor{keywordflow}{if} (!exists || !hasAllowedExtension)
223                 \{
224                     invalid.Add(string.Format(CultureInfo.CurrentCulture, \textcolor{stringliteral}{"\(\backslash\)"\{0\}\(\backslash\)""}, path));
225                 \}
226             \}
227 
228             \textcolor{keywordflow}{if} (invalid.Count != 0)
229             \{
230 
231                 var message = string.Format(CultureInfo.CurrentCulture, \textcolor{stringliteral}{"The file\{0\} \{1\} \{2\}."},
232                     invalid.Count == 1 ? \textcolor{stringliteral}{""} : \textcolor{stringliteral}{"s"},
233                                             string.Join(\textcolor{stringliteral}{", "}, invalid.ToArray()),
234                     invalid.Count == 1 ? \textcolor{stringliteral}{"is not valid"} : \textcolor{stringliteral}{"are not valid"}
235                 );
236 
237                 \hyperlink{a00174_a2f63f9f5b7634cb50ee75ff2eb18b137}{Error}(message);
238             \}
239         \}
\end{DoxyCode}


Here is the call graph for this function\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{a00174_ad77564b25725a771f0fd4da430582e6f_cgraph}
\end{center}
\end{figure}




Here is the caller graph for this function\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{a00174_ad77564b25725a771f0fd4da430582e6f_icgraph}
\end{center}
\end{figure}


\hypertarget{a00174_aab244361a510cee18ad2f636d110e0d5}{\index{Yarn\-::\-Yarn\-Spinner\-Console@{Yarn\-::\-Yarn\-Spinner\-Console}!Create\-Dialogue@{Create\-Dialogue}}
\index{Create\-Dialogue@{Create\-Dialogue}!Yarn::YarnSpinnerConsole@{Yarn\-::\-Yarn\-Spinner\-Console}}
\subsubsection[{Create\-Dialogue}]{\setlength{\rightskip}{0pt plus 5cm}static {\bf Dialogue} Yarn.\-Yarn\-Spinner\-Console.\-Create\-Dialogue (
\begin{DoxyParamCaption}
\item[{{\bf Execution\-Options}}]{options, }
\item[{{\bf Console\-Runner\-Implementation}}]{impl}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}, {\ttfamily [package]}}}\label{a00174_aab244361a510cee18ad2f636d110e0d5}


Definition at line 383 of file Main.\-cs.



References Yarn.\-Value.\-As\-Bool, Yarn.\-Yarn\-Spinner\-Console.\-Error(), Yarn.\-Yarn\-Spinner\-Console.\-Note(), Yarn.\-Base\-Options.\-show\-Debugging\-Info, and Yarn.\-Yarn\-Spinner\-Console.\-Warn().



Referenced by Yarn.\-Yarn\-Spinner\-Console.\-Run(), and Yarn.\-Yarn\-Spinner\-Console.\-Verify().


\begin{DoxyCode}
384         \{
385 
386             \textcolor{comment}{// Load nodes}
387             var dialogue = \textcolor{keyword}{new} Dialogue(impl);
388 
389             \textcolor{comment}{// Add some methods for testing}
390             dialogue.library.RegisterFunction(\textcolor{stringliteral}{"add\_three\_operands"}, 3, delegate (Value[] parameters)
391             \{
392                 \textcolor{keywordflow}{return} parameters[0] + parameters[1] + parameters[2];
393             \});
394 
395             dialogue.library.RegisterFunction(\textcolor{stringliteral}{"last\_value"}, -1, delegate (Value[] parameters)
396             \{
397                 \textcolor{comment}{// return the last value}
398                 \textcolor{keywordflow}{return} parameters[parameters.Length - 1];
399             \});
400 
401             dialogue.library.RegisterFunction(\textcolor{stringliteral}{"is\_even"}, 1, delegate (Value[] parameters)
402             \{
403                 \textcolor{keywordflow}{return} (\textcolor{keywordtype}{int})parameters[0].AsNumber % 2 == 0;
404             \});
405 
406             \textcolor{comment}{// Register the "assert" function, which stops execution if its parameter evaluates to false}
407             dialogue.library.RegisterFunction(\textcolor{stringliteral}{"assert"}, -1, delegate (Value[] parameters)
408             \{
409                 \textcolor{keywordflow}{if} (parameters[0].AsBool == \textcolor{keyword}{false})
410                 \{
411 
412                     \textcolor{comment}{// TODO: Include file, node and line number}
413                     \textcolor{keywordflow}{if} (parameters.Length > 1 && parameters[1].AsBool)
414                     \{
415                         dialogue.LogErrorMessage(\textcolor{stringliteral}{"ASSERTION FAILED: "} + parameters[1].AsString);
416                     \}
417                     \textcolor{keywordflow}{else}
418                     \{
419                         dialogue.LogErrorMessage(\textcolor{stringliteral}{"ASSERTION FAILED"});
420                     \}
421                     Environment.Exit(1);
422                 \}
423             \});
424 
425 
426             \textcolor{comment}{// Register a function to let test scripts register how many}
427             \textcolor{comment}{// options they expect to send}
428             dialogue.library.RegisterFunction(\textcolor{stringliteral}{"prepare\_for\_options"}, 2, delegate (Value[] parameters)
429             \{
430                 impl.numberOfExpectedOptions = (int)parameters[0].AsNumber;
431                 impl.autoSelectOptionNumber = (int)parameters[1].AsNumber;
432             \});
433 
434             dialogue.library.RegisterFunction(\textcolor{stringliteral}{"expect\_line"}, 1, delegate (Value[] parameters)
435             \{
436                 impl.expectedNextLine = parameters[0].AsString;
437             \});
438 
439             dialogue.library.RegisterFunction(\textcolor{stringliteral}{"expect\_command"}, 1, delegate (Value[] parameters)
440             \{
441                 impl.expectedNextCommand = parameters[0].AsString;
442             \});
443 
444             \textcolor{comment}{// If debugging is enabled, log debug messages; otherwise, ignore them}
445             \textcolor{keywordflow}{if} (options.showDebuggingInfo)
446             \{
447                 dialogue.LogDebugMessage = delegate (\textcolor{keywordtype}{string} message)
448                 \{
449                     \hyperlink{a00174_a939cc9e943c574b36c6af93e9c772702}{Note}(message);
450                 \};
451             \}
452             \textcolor{keywordflow}{else}
453             \{
454                 dialogue.LogDebugMessage = delegate (\textcolor{keywordtype}{string} message) \{ \};
455             \}
456 
457             dialogue.LogErrorMessage = delegate (\textcolor{keywordtype}{string} message)
458             \{
459                 \hyperlink{a00174_a979bb6f049b6c5294f745a19e24ddd9d}{Warn}(\textcolor{stringliteral}{"Yarn Error: "} + message);
460             \};
461 
462             \textcolor{keywordflow}{foreach} (var file \textcolor{keywordflow}{in} options.files)
463             \{
464                 \textcolor{keywordflow}{try}
465                 \{
466                     dialogue.LoadFile(file, \textcolor{keyword}{false}, \textcolor{keyword}{false}, options.onlyConsiderNode);
467                 \}
468                 \textcolor{keywordflow}{catch} (Yarn.ParseException e)
469                 \{
470                     \hyperlink{a00174_a979bb6f049b6c5294f745a19e24ddd9d}{Warn}(e.Message);
471                 \}
472 
473             \}
474 
475             \textcolor{comment}{// Load string table}
476             \textcolor{keywordflow}{if} (options.stringTable != null)
477             \{
478 
479                 var parsedTable = \textcolor{keyword}{new} Dictionary<string, string>();
480 
481                 \textcolor{keyword}{using} (var reader = \textcolor{keyword}{new} System.IO.StreamReader(options.stringTable))
482                 \{
483                     \textcolor{keyword}{using} (var csvReader = \textcolor{keyword}{new} \hyperlink{a00076}{CsvReader}(reader))
484                     \{
485                         \textcolor{keywordflow}{if} (csvReader.ReadHeader() == \textcolor{keyword}{false})
486                         \{
487                             \hyperlink{a00174_a2f63f9f5b7634cb50ee75ff2eb18b137}{Error}(\textcolor{keywordtype}{string}.Format(CultureInfo.CurrentCulture, \textcolor{stringliteral}{"\{0\} is not a valid string
       table"}, options.stringTable));
488                         \}
489 
490                         \textcolor{keywordflow}{foreach} (var row \textcolor{keywordflow}{in} csvReader.GetRecords<LocalisedLine>())
491                         \{
492                             parsedTable[row.LineCode] = row.LineText;
493                         \}
494                     \}
495                 \}
496 
497                 dialogue.AddStringTable(parsedTable);
498             \}
499 
500             \textcolor{keywordflow}{return} dialogue;
501         \}
\end{DoxyCode}


Here is the call graph for this function\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{a00174_aab244361a510cee18ad2f636d110e0d5_cgraph}
\end{center}
\end{figure}




Here is the caller graph for this function\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{a00174_aab244361a510cee18ad2f636d110e0d5_icgraph}
\end{center}
\end{figure}


\hypertarget{a00174_aff69d6e16dddb077f87a616a57cd3c66}{\index{Yarn\-::\-Yarn\-Spinner\-Console@{Yarn\-::\-Yarn\-Spinner\-Console}!Create\-Dialogue\-For\-Utilities@{Create\-Dialogue\-For\-Utilities}}
\index{Create\-Dialogue\-For\-Utilities@{Create\-Dialogue\-For\-Utilities}!Yarn::YarnSpinnerConsole@{Yarn\-::\-Yarn\-Spinner\-Console}}
\subsubsection[{Create\-Dialogue\-For\-Utilities}]{\setlength{\rightskip}{0pt plus 5cm}static {\bf Dialogue} Yarn.\-Yarn\-Spinner\-Console.\-Create\-Dialogue\-For\-Utilities (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}, {\ttfamily [package]}}}\label{a00174_aff69d6e16dddb077f87a616a57cd3c66}


Definition at line 141 of file Main.\-cs.


\begin{DoxyCode}
142         \{
143 
144             \textcolor{comment}{// Note that we're passing in with a null library - this means}
145             \textcolor{comment}{// that all function checking will be disabled, and missing funcs}
146             \textcolor{comment}{// will not cause a compile error. If a func IS missing at runtime,}
147             \textcolor{comment}{// THAT will throw an exception.}
148 
149             \textcolor{comment}{// We do this because this tool has no idea about any of the custom}
150             \textcolor{comment}{// functions that you might be using.}
151 
152             Dialogue d = \textcolor{keyword}{new} Dialogue(null);
153 
154             \textcolor{comment}{// Debug logging goes to Note}
155             d.LogDebugMessage = message => YarnSpinnerConsole.Note(message);
156 
157             \textcolor{comment}{// When erroring, call Warn, not Error, which terminates the program}
158             d.LogErrorMessage = message => YarnSpinnerConsole.Warn(message);
159 
160             \textcolor{keywordflow}{return} d;
161         \}
\end{DoxyCode}
\hypertarget{a00174_a2f63f9f5b7634cb50ee75ff2eb18b137}{\index{Yarn\-::\-Yarn\-Spinner\-Console@{Yarn\-::\-Yarn\-Spinner\-Console}!Error@{Error}}
\index{Error@{Error}!Yarn::YarnSpinnerConsole@{Yarn\-::\-Yarn\-Spinner\-Console}}
\subsubsection[{Error}]{\setlength{\rightskip}{0pt plus 5cm}static void Yarn.\-Yarn\-Spinner\-Console.\-Error (
\begin{DoxyParamCaption}
\item[{params string\mbox{[}$\,$\mbox{]}}]{messages}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{a00174_a2f63f9f5b7634cb50ee75ff2eb18b137}


Definition at line 163 of file Main.\-cs.



Referenced by Yarn.\-Yarn\-Spinner\-Console.\-Check\-File\-List(), Yarn.\-Yarn\-Spinner\-Console.\-Create\-Dialogue(), Yarn.\-Yarn\-Spinner\-Console.\-Console\-Runner\-Implementation.\-Handle\-Error\-Message(), Yarn.\-Yarn\-Spinner\-Console.\-Console\-Runner\-Implementation.\-Run\-Command(), Yarn.\-Yarn\-Spinner\-Console.\-Console\-Runner\-Implementation.\-Run\-Line(), Yarn.\-Yarn\-Spinner\-Console.\-Console\-Runner\-Implementation.\-Run\-Options(), and Yarn.\-Yarn\-Spinner\-Console.\-Verify().


\begin{DoxyCode}
164         \{
165 
166             \textcolor{keywordflow}{foreach} (var message \textcolor{keywordflow}{in} messages)
167             \{
168                 Console.ForegroundColor = ConsoleColor.DarkRed;
169                 Console.Write(\textcolor{stringliteral}{"Error: "});
170                 Console.ResetColor();
171                 Console.WriteLine(message);
172             \}
173 
174             Environment.Exit(1);
175         \}
\end{DoxyCode}


Here is the caller graph for this function\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{a00174_a2f63f9f5b7634cb50ee75ff2eb18b137_icgraph}
\end{center}
\end{figure}


\hypertarget{a00174_a1d71ff2eb190449ea1d42ce86f44489f}{\index{Yarn\-::\-Yarn\-Spinner\-Console@{Yarn\-::\-Yarn\-Spinner\-Console}!Main@{Main}}
\index{Main@{Main}!Yarn::YarnSpinnerConsole@{Yarn\-::\-Yarn\-Spinner\-Console}}
\subsubsection[{Main}]{\setlength{\rightskip}{0pt plus 5cm}static void Yarn.\-Yarn\-Spinner\-Console.\-Main (
\begin{DoxyParamCaption}
\item[{string\mbox{[}$\,$\mbox{]}}]{args}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{a00174_a1d71ff2eb190449ea1d42ce86f44489f}


Definition at line 240 of file Main.\-cs.



References Yarn.\-Line\-Adder.\-Add\-Lines(), Yarn.\-File\-Format\-Converter.\-Convert\-Format(), Yarn.\-Table\-Generator.\-Generate\-Tables(), Yarn.\-Yarn\-Spinner\-Console.\-Run(), and Yarn.\-Yarn\-Spinner\-Console.\-Verify().


\begin{DoxyCode}
241         \{
242 
243             \textcolor{comment}{// Read and dispatch the appropriate command}
244             var results = CommandLine.Parser.Default.ParseArguments
245             <
246             RunOptions,
247             VerifyOptions,
248             CompileOptions,
249             GenerateTableOptions,
250             AddLabelsOptions,
251             ConvertFormatOptions
252             >(args);
253 
254             var returnCode = results.MapResult(
255                 (RunOptions options) => \hyperlink{a00174_a1b974c55540795a9e643c2ec055fbd51}{Run}(options),
256                 (VerifyOptions options) => \hyperlink{a00174_a029a5624e7cc3a16ae586b64f13049de}{Verify}(options),
257                 (AddLabelsOptions options) => LineAdder.AddLines(options),
258                 (GenerateTableOptions options) => TableGenerator.GenerateTables(options),
259                 (ConvertFormatOptions options) => FileFormatConverter.ConvertFormat(options),
260 
261                 errors => \{ \textcolor{keywordflow}{return} 1; \});
262 
263             Environment.Exit(returnCode);
264 
265 
266         \}
\end{DoxyCode}


Here is the call graph for this function\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{a00174_a1d71ff2eb190449ea1d42ce86f44489f_cgraph}
\end{center}
\end{figure}


\hypertarget{a00174_a939cc9e943c574b36c6af93e9c772702}{\index{Yarn\-::\-Yarn\-Spinner\-Console@{Yarn\-::\-Yarn\-Spinner\-Console}!Note@{Note}}
\index{Note@{Note}!Yarn::YarnSpinnerConsole@{Yarn\-::\-Yarn\-Spinner\-Console}}
\subsubsection[{Note}]{\setlength{\rightskip}{0pt plus 5cm}static void Yarn.\-Yarn\-Spinner\-Console.\-Note (
\begin{DoxyParamCaption}
\item[{params string\mbox{[}$\,$\mbox{]}}]{messages}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{a00174_a939cc9e943c574b36c6af93e9c772702}


Definition at line 177 of file Main.\-cs.



Referenced by Yarn.\-Yarn\-Spinner\-Console.\-Create\-Dialogue(), Yarn.\-Yarn\-Spinner\-Console.\-Console\-Runner\-Implementation.\-Handle\-Debug\-Message(), Yarn.\-Yarn\-Spinner\-Console.\-Console\-Runner\-Implementation.\-Run\-Options(), and Yarn.\-Yarn\-Spinner\-Console.\-Verify().


\begin{DoxyCode}
178         \{
179 
180             \textcolor{keywordflow}{foreach} (var message \textcolor{keywordflow}{in} messages)
181             \{
182                 Console.ForegroundColor = ConsoleColor.DarkBlue;
183                 Console.Write(\textcolor{stringliteral}{"Note: "});
184                 Console.ResetColor();
185                 Console.WriteLine(message);
186             \}
187 
188 
189         \}
\end{DoxyCode}


Here is the caller graph for this function\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{a00174_a939cc9e943c574b36c6af93e9c772702_icgraph}
\end{center}
\end{figure}


\hypertarget{a00174_a1b974c55540795a9e643c2ec055fbd51}{\index{Yarn\-::\-Yarn\-Spinner\-Console@{Yarn\-::\-Yarn\-Spinner\-Console}!Run@{Run}}
\index{Run@{Run}!Yarn::YarnSpinnerConsole@{Yarn\-::\-Yarn\-Spinner\-Console}}
\subsubsection[{Run}]{\setlength{\rightskip}{0pt plus 5cm}static int Yarn.\-Yarn\-Spinner\-Console.\-Run (
\begin{DoxyParamCaption}
\item[{{\bf Run\-Options}}]{options}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}, {\ttfamily [private]}}}\label{a00174_a1b974c55540795a9e643c2ec055fbd51}


Definition at line 270 of file Main.\-cs.



References Yarn.\-Yarn\-Spinner\-Console.\-A\-L\-L\-O\-W\-E\-D\-\_\-\-E\-X\-T\-E\-N\-S\-I\-O\-N\-S, Yarn.\-Yarn\-Spinner\-Console.\-Check\-File\-List(), Yarn.\-Yarn\-Spinner\-Console.\-Create\-Dialogue(), Yarn.\-Base\-Options.\-files, Yarn.\-Dialogue.\-Run(), Yarn.\-Run\-Options.\-wait\-For\-Input, and Yarn.\-Yarn\-Spinner\-Console.\-Warn().



Referenced by Yarn.\-Yarn\-Spinner\-Console.\-Main().


\begin{DoxyCode}
271         \{
272 
273             \hyperlink{a00174_ad77564b25725a771f0fd4da430582e6f}{CheckFileList}(options.files, \hyperlink{a00174_a0979de7ea02c8c0375b8220a12e6575e}{ALLOWED\_EXTENSIONS});
274 
275             \textcolor{comment}{// Create the object that handles callbacks}
276             var impl = \textcolor{keyword}{new} ConsoleRunnerImplementation(waitForLines: options.waitForInput);
277 
278             \textcolor{comment}{// load the default variables we got on the command line}
279             \textcolor{keywordflow}{foreach} (var variable \textcolor{keywordflow}{in} options.variables)
280             \{
281                 var entry = variable.Split(\textcolor{keyword}{new} \textcolor{keywordtype}{char}[] \{ \textcolor{charliteral}{'='} \}, StringSplitOptions.RemoveEmptyEntries);
282 
283                 \textcolor{keywordtype}{float} value;
284                 \textcolor{comment}{// If there aren't two parts to this or the second part isn't a float, fail}
285                 \textcolor{keywordflow}{if} (entry.Length != 2 || \textcolor{keywordtype}{float}.TryParse(entry[1], out value) == \textcolor{keyword}{false})
286                 \{
287                     \hyperlink{a00174_a979bb6f049b6c5294f745a19e24ddd9d}{Warn}(\textcolor{keywordtype}{string}.Format(CultureInfo.CurrentCulture, \textcolor{stringliteral}{"Skipping invalid variable \{0\}"}, 
      variable));
288                     \textcolor{keywordflow}{continue};
289                 \}
290                 var name = entry[0];
291 
292                 impl.SetValue(name, value);
293             \}
294 
295             \textcolor{keywordflow}{if} (options.automaticallySelectFirstOption == \textcolor{keyword}{true})
296             \{
297                 impl.autoSelectFirstOption = \textcolor{keyword}{true};
298             \}
299 
300             Dialogue dialogue = \hyperlink{a00174_aab244361a510cee18ad2f636d110e0d5}{CreateDialogue}(options, impl);
301 
302             \textcolor{comment}{// Run the conversation}
303 
304             \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} run = 0; run < options.runTimes; run++)
305             \{
306                 \textcolor{keywordflow}{foreach} (var step \textcolor{keywordflow}{in} dialogue.Run(options.startNode))
307                 \{
308 
309                     \textcolor{comment}{// It can be one of three types: a line to show, options}
310                     \textcolor{comment}{// to present to the user, or an internal command to run}
311 
312                     \textcolor{keywordflow}{if} (step is Dialogue.LineResult)
313                     \{
314                         var lineResult = step as Dialogue.LineResult;
315                         impl.RunLine(lineResult.line);
316                     \}
317                     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (step is Dialogue.OptionSetResult)
318                     \{
319                         var optionsResult = step as Dialogue.OptionSetResult;
320                         impl.RunOptions(optionsResult.options, optionsResult.setSelectedOptionDelegate);
321                     \}
322                     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (step is Dialogue.CommandResult)
323                     \{
324                         var commandResult = step as Dialogue.CommandResult;
325                         impl.RunCommand(commandResult.command.text);
326                     \}
327                 \}
328                 impl.DialogueComplete();
329             \}
330             \textcolor{keywordflow}{return} 0;
331         \}
\end{DoxyCode}


Here is the call graph for this function\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{a00174_a1b974c55540795a9e643c2ec055fbd51_cgraph}
\end{center}
\end{figure}




Here is the caller graph for this function\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{a00174_a1b974c55540795a9e643c2ec055fbd51_icgraph}
\end{center}
\end{figure}


\hypertarget{a00174_a029a5624e7cc3a16ae586b64f13049de}{\index{Yarn\-::\-Yarn\-Spinner\-Console@{Yarn\-::\-Yarn\-Spinner\-Console}!Verify@{Verify}}
\index{Verify@{Verify}!Yarn::YarnSpinnerConsole@{Yarn\-::\-Yarn\-Spinner\-Console}}
\subsubsection[{Verify}]{\setlength{\rightskip}{0pt plus 5cm}static int Yarn.\-Yarn\-Spinner\-Console.\-Verify (
\begin{DoxyParamCaption}
\item[{{\bf Verify\-Options}}]{options}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}, {\ttfamily [private]}}}\label{a00174_a029a5624e7cc3a16ae586b64f13049de}


Definition at line 333 of file Main.\-cs.



References Yarn.\-Yarn\-Spinner\-Console.\-A\-L\-L\-O\-W\-E\-D\-\_\-\-E\-X\-T\-E\-N\-S\-I\-O\-N\-S, Yarn.\-Yarn\-Spinner\-Console.\-Check\-File\-List(), Yarn.\-Verify\-Options.\-compile\-And\-Exit, Yarn.\-Yarn\-Spinner\-Console.\-Create\-Dialogue(), Yarn.\-Yarn\-Spinner\-Console.\-Error(), Yarn.\-Base\-Options.\-files, Yarn.\-Yarn\-Spinner\-Console.\-Note(), and Yarn.\-Yarn\-Spinner\-Console.\-Warn().



Referenced by Yarn.\-Yarn\-Spinner\-Console.\-Main().


\begin{DoxyCode}
334         \{
335 
336             \hyperlink{a00174_ad77564b25725a771f0fd4da430582e6f}{CheckFileList}(options.files, \hyperlink{a00174_a0979de7ea02c8c0375b8220a12e6575e}{ALLOWED\_EXTENSIONS});
337 
338             Dialogue dialogue;
339             \textcolor{keywordflow}{try}
340             \{
341                 dialogue = \hyperlink{a00174_aab244361a510cee18ad2f636d110e0d5}{CreateDialogue}(options, null);
342             \}
343 \textcolor{preprocessor}{#pragma warning disable CA1031 // Do not catch general exception types}
344 \textcolor{preprocessor}{}            \textcolor{keywordflow}{catch}
345             \{
346                 \textcolor{keywordflow}{return} 1;
347             \}
348 \textcolor{preprocessor}{#pragma warning restore CA1031 // Do not catch general exception types}
349 \textcolor{preprocessor}{}
350             \textcolor{keywordflow}{if} (options.compileAndExit)
351             \{
352                 var result = dialogue.GetByteCode();
353                 Console.WriteLine(result);
354                 \textcolor{keywordflow}{return} 0;
355             \}
356 
357             var context = \textcolor{keyword}{new} \hyperlink{a00056}{Yarn.Analysis.Context}();
358 
359             dialogue.Analyse(context);
360 
361             \textcolor{keywordflow}{foreach} (var diagnosis \textcolor{keywordflow}{in} context.FinishAnalysis())
362             \{
363                 \textcolor{keywordflow}{switch} (diagnosis.severity)
364                 \{
365                     \textcolor{keywordflow}{case} Analysis.Diagnosis.Severity.Error:
366                         \hyperlink{a00174_a2f63f9f5b7634cb50ee75ff2eb18b137}{Error}(diagnosis.ToString(showSeverity: \textcolor{keyword}{false}));
367                         \textcolor{keywordflow}{break};
368                     \textcolor{keywordflow}{case} Analysis.Diagnosis.Severity.Warning:
369                         \hyperlink{a00174_a979bb6f049b6c5294f745a19e24ddd9d}{Warn}(diagnosis.ToString(showSeverity: \textcolor{keyword}{false}));
370                         \textcolor{keywordflow}{break};
371                     \textcolor{keywordflow}{case} Analysis.Diagnosis.Severity.Note:
372                         \hyperlink{a00174_a939cc9e943c574b36c6af93e9c772702}{Note}(diagnosis.ToString(showSeverity: \textcolor{keyword}{false}));
373                         \textcolor{keywordflow}{break};
374                     \textcolor{keywordflow}{default}:
375                         \textcolor{keywordflow}{throw} \textcolor{keyword}{new} ArgumentOutOfRangeException();
376                 \}
377 
378             \}
379             \textcolor{keywordflow}{return} 0;
380 
381         \}
\end{DoxyCode}


Here is the call graph for this function\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{a00174_a029a5624e7cc3a16ae586b64f13049de_cgraph}
\end{center}
\end{figure}




Here is the caller graph for this function\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{a00174_a029a5624e7cc3a16ae586b64f13049de_icgraph}
\end{center}
\end{figure}


\hypertarget{a00174_a979bb6f049b6c5294f745a19e24ddd9d}{\index{Yarn\-::\-Yarn\-Spinner\-Console@{Yarn\-::\-Yarn\-Spinner\-Console}!Warn@{Warn}}
\index{Warn@{Warn}!Yarn::YarnSpinnerConsole@{Yarn\-::\-Yarn\-Spinner\-Console}}
\subsubsection[{Warn}]{\setlength{\rightskip}{0pt plus 5cm}static void Yarn.\-Yarn\-Spinner\-Console.\-Warn (
\begin{DoxyParamCaption}
\item[{params string\mbox{[}$\,$\mbox{]}}]{messages}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{a00174_a979bb6f049b6c5294f745a19e24ddd9d}


Definition at line 191 of file Main.\-cs.



Referenced by Yarn.\-Yarn\-Spinner\-Console.\-Check\-File\-List(), Yarn.\-Yarn\-Spinner\-Console.\-Create\-Dialogue(), Yarn.\-Yarn\-Spinner\-Console.\-Run(), and Yarn.\-Yarn\-Spinner\-Console.\-Verify().


\begin{DoxyCode}
192         \{
193             \textcolor{keywordflow}{foreach} (var message \textcolor{keywordflow}{in} messages)
194             \{
195                 Console.ForegroundColor = ConsoleColor.DarkYellow;
196                 Console.Write(\textcolor{stringliteral}{"Warning: "});
197                 Console.ResetColor();
198                 Console.WriteLine(message);
199             \}
200         \}
\end{DoxyCode}


Here is the caller graph for this function\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{a00174_a979bb6f049b6c5294f745a19e24ddd9d_icgraph}
\end{center}
\end{figure}




\subsection{Member Data Documentation}
\hypertarget{a00174_a0979de7ea02c8c0375b8220a12e6575e}{\index{Yarn\-::\-Yarn\-Spinner\-Console@{Yarn\-::\-Yarn\-Spinner\-Console}!A\-L\-L\-O\-W\-E\-D\-\_\-\-E\-X\-T\-E\-N\-S\-I\-O\-N\-S@{A\-L\-L\-O\-W\-E\-D\-\_\-\-E\-X\-T\-E\-N\-S\-I\-O\-N\-S}}
\index{A\-L\-L\-O\-W\-E\-D\-\_\-\-E\-X\-T\-E\-N\-S\-I\-O\-N\-S@{A\-L\-L\-O\-W\-E\-D\-\_\-\-E\-X\-T\-E\-N\-S\-I\-O\-N\-S}!Yarn::YarnSpinnerConsole@{Yarn\-::\-Yarn\-Spinner\-Console}}
\subsubsection[{A\-L\-L\-O\-W\-E\-D\-\_\-\-E\-X\-T\-E\-N\-S\-I\-O\-N\-S}]{\setlength{\rightskip}{0pt plus 5cm}List$<$string$>$ Yarn.\-Yarn\-Spinner\-Console.\-A\-L\-L\-O\-W\-E\-D\-\_\-\-E\-X\-T\-E\-N\-S\-I\-O\-N\-S = new List$<$string$>$(new string\mbox{[}$\,$\mbox{]} \{ \char`\"{}.node\char`\"{}, \char`\"{}.yarn.\-bytes\char`\"{}, \char`\"{}.yarn.\-txt\char`\"{} \})\hspace{0.3cm}{\ttfamily [static]}, {\ttfamily [package]}}}\label{a00174_a0979de7ea02c8c0375b8220a12e6575e}


Definition at line 268 of file Main.\-cs.



Referenced by Yarn.\-Line\-Adder.\-Add\-Lines(), Yarn.\-File\-Format\-Converter.\-Convert\-Format(), Yarn.\-Table\-Generator.\-Generate\-Tables(), Yarn.\-Yarn\-Spinner\-Console.\-Run(), and Yarn.\-Yarn\-Spinner\-Console.\-Verify().



The documentation for this class was generated from the following file\-:\begin{DoxyCompactItemize}
\item 
Yarn\-Spinner\-Console/\hyperlink{a00303}{Main.\-cs}\end{DoxyCompactItemize}
