\hypertarget{a00163}{\section{Yarn.\-Analysis.\-Unused\-Variable\-Checker Class Reference}
\label{a00163}\index{Yarn.\-Analysis.\-Unused\-Variable\-Checker@{Yarn.\-Analysis.\-Unused\-Variable\-Checker}}
}


Inheritance diagram for Yarn.\-Analysis.\-Unused\-Variable\-Checker\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=228pt]{a00683}
\end{center}
\end{figure}


Collaboration diagram for Yarn.\-Analysis.\-Unused\-Variable\-Checker\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=228pt]{a00684}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
override void \hyperlink{a00163_aeac8f333d4dcc85f4d4a716bf8fea01f}{Diagnose} (\hyperlink{a00138}{Program} program)
\item 
override I\-Enumerable$<$ \hyperlink{a00087}{Diagnosis} $>$ \hyperlink{a00163_a107aecf707b130c4b733930a95f9154e}{Gather\-Diagnoses} ()
\item 
abstract void \hyperlink{a00050_aba4a36cb823b11ee491074e26477d084}{Diagnose} (\hyperlink{a00138}{Yarn.\-Program} program)
\end{DoxyCompactItemize}
\subsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
Hash\-Set$<$ string $>$ \hyperlink{a00163_a6b542092ddce1b92c9455d60899518a9}{read\-Variables} = new Hash\-Set$<$string$>$ ()
\item 
Hash\-Set$<$ string $>$ \hyperlink{a00163_a0c2fe6eded1b10b135ca2469f5980a39}{written\-Variables} = new Hash\-Set$<$string$>$ ()
\end{DoxyCompactItemize}


\subsection{Detailed Description}


Definition at line 191 of file Analyser.\-cs.



\subsection{Member Function Documentation}
\hypertarget{a00050_aba4a36cb823b11ee491074e26477d084}{\index{Yarn\-::\-Analysis\-::\-Unused\-Variable\-Checker@{Yarn\-::\-Analysis\-::\-Unused\-Variable\-Checker}!Diagnose@{Diagnose}}
\index{Diagnose@{Diagnose}!Yarn::Analysis::UnusedVariableChecker@{Yarn\-::\-Analysis\-::\-Unused\-Variable\-Checker}}
\subsubsection[{Diagnose}]{\setlength{\rightskip}{0pt plus 5cm}abstract void Yarn.\-Analysis.\-Compiled\-Program\-Analyser.\-Diagnose (
\begin{DoxyParamCaption}
\item[{{\bf Yarn.\-Program}}]{program}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [pure virtual]}, {\ttfamily [inherited]}}}\label{a00050_aba4a36cb823b11ee491074e26477d084}
\hypertarget{a00163_aeac8f333d4dcc85f4d4a716bf8fea01f}{\index{Yarn\-::\-Analysis\-::\-Unused\-Variable\-Checker@{Yarn\-::\-Analysis\-::\-Unused\-Variable\-Checker}!Diagnose@{Diagnose}}
\index{Diagnose@{Diagnose}!Yarn::Analysis::UnusedVariableChecker@{Yarn\-::\-Analysis\-::\-Unused\-Variable\-Checker}}
\subsubsection[{Diagnose}]{\setlength{\rightskip}{0pt plus 5cm}override void Yarn.\-Analysis.\-Unused\-Variable\-Checker.\-Diagnose (
\begin{DoxyParamCaption}
\item[{{\bf Program}}]{program}
\end{DoxyParamCaption}
)}}\label{a00163_aeac8f333d4dcc85f4d4a716bf8fea01f}


Definition at line 196 of file Analyser.\-cs.


\begin{DoxyCode}
197         \{
198 
199             \textcolor{comment}{// In each node, find all reads and writes to variables}
200             \textcolor{keywordflow}{foreach} (var nodeInfo \textcolor{keywordflow}{in} program.nodes) \{
201 
202                 var nodeName = nodeInfo.Key;
203                 var theNode = nodeInfo.Value;
204 
205                 \textcolor{keywordflow}{foreach} (var instruction \textcolor{keywordflow}{in} theNode.instructions) \{
206 
207                     \textcolor{keywordflow}{switch} (instruction.operation) \{
208                     \textcolor{keywordflow}{case} ByteCode.PushVariable:
209                         readVariables.Add ((string)instruction.operandA);
210                         \textcolor{keywordflow}{break};
211                     \textcolor{keywordflow}{case} ByteCode.StoreVariable:
212                         writtenVariables.Add ((string)instruction.operandA);
213                         \textcolor{keywordflow}{break};
214                     \}
215                 \}
216             \}
217 
218         \}
\end{DoxyCode}
\hypertarget{a00163_a107aecf707b130c4b733930a95f9154e}{\index{Yarn\-::\-Analysis\-::\-Unused\-Variable\-Checker@{Yarn\-::\-Analysis\-::\-Unused\-Variable\-Checker}!Gather\-Diagnoses@{Gather\-Diagnoses}}
\index{Gather\-Diagnoses@{Gather\-Diagnoses}!Yarn::Analysis::UnusedVariableChecker@{Yarn\-::\-Analysis\-::\-Unused\-Variable\-Checker}}
\subsubsection[{Gather\-Diagnoses}]{\setlength{\rightskip}{0pt plus 5cm}override I\-Enumerable$<${\bf Diagnosis}$>$ Yarn.\-Analysis.\-Unused\-Variable\-Checker.\-Gather\-Diagnoses (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}}\label{a00163_a107aecf707b130c4b733930a95f9154e}


Implements \hyperlink{a00050_afe059a2ceeabe50380b000420e512bd6}{Yarn.\-Analysis.\-Compiled\-Program\-Analyser}.



Definition at line 220 of file Analyser.\-cs.


\begin{DoxyCode}
221         \{
222 
223             \textcolor{comment}{// Exclude read variables that are also written}
224             var readOnlyVariables = \textcolor{keyword}{new} HashSet<string> (\hyperlink{a00163_a6b542092ddce1b92c9455d60899518a9}{readVariables});
225             readOnlyVariables.ExceptWith (\hyperlink{a00163_a0c2fe6eded1b10b135ca2469f5980a39}{writtenVariables});
226 
227             \textcolor{comment}{// Exclude written variables that are also read}
228             var writeOnlyVariables = \textcolor{keyword}{new} HashSet<string> (\hyperlink{a00163_a0c2fe6eded1b10b135ca2469f5980a39}{writtenVariables});
229             writeOnlyVariables.ExceptWith (\hyperlink{a00163_a6b542092ddce1b92c9455d60899518a9}{readVariables});
230 
231             \textcolor{comment}{// Generate diagnoses}
232             var diagnoses = \textcolor{keyword}{new} List<Diagnosis>();
233 
234             \textcolor{keywordflow}{foreach} (var readOnlyVariable \textcolor{keywordflow}{in} readOnlyVariables) \{
235                 var message = string.Format (CultureInfo.CurrentCulture, \textcolor{stringliteral}{"Variable \{0\} is read from, but
       never assigned"}, readOnlyVariable);
236                 diagnoses.Add(\textcolor{keyword}{new} Diagnosis (message, Diagnosis.Severity.Warning));
237             \}
238 
239             \textcolor{keywordflow}{foreach} (var writeOnlyVariable \textcolor{keywordflow}{in} writeOnlyVariables) \{
240                 var message = string.Format (CultureInfo.CurrentCulture, \textcolor{stringliteral}{"Variable \{0\} is assigned, but
       never read from"}, writeOnlyVariable);
241                 diagnoses.Add(\textcolor{keyword}{new} Diagnosis (message, Diagnosis.Severity.Warning));
242             \}
243 
244             \textcolor{keywordflow}{return} diagnoses;
245         \}
\end{DoxyCode}


\subsection{Member Data Documentation}
\hypertarget{a00163_a6b542092ddce1b92c9455d60899518a9}{\index{Yarn\-::\-Analysis\-::\-Unused\-Variable\-Checker@{Yarn\-::\-Analysis\-::\-Unused\-Variable\-Checker}!read\-Variables@{read\-Variables}}
\index{read\-Variables@{read\-Variables}!Yarn::Analysis::UnusedVariableChecker@{Yarn\-::\-Analysis\-::\-Unused\-Variable\-Checker}}
\subsubsection[{read\-Variables}]{\setlength{\rightskip}{0pt plus 5cm}Hash\-Set$<$string$>$ Yarn.\-Analysis.\-Unused\-Variable\-Checker.\-read\-Variables = new Hash\-Set$<$string$>$ ()\hspace{0.3cm}{\ttfamily [private]}}}\label{a00163_a6b542092ddce1b92c9455d60899518a9}


Definition at line 193 of file Analyser.\-cs.

\hypertarget{a00163_a0c2fe6eded1b10b135ca2469f5980a39}{\index{Yarn\-::\-Analysis\-::\-Unused\-Variable\-Checker@{Yarn\-::\-Analysis\-::\-Unused\-Variable\-Checker}!written\-Variables@{written\-Variables}}
\index{written\-Variables@{written\-Variables}!Yarn::Analysis::UnusedVariableChecker@{Yarn\-::\-Analysis\-::\-Unused\-Variable\-Checker}}
\subsubsection[{written\-Variables}]{\setlength{\rightskip}{0pt plus 5cm}Hash\-Set$<$string$>$ Yarn.\-Analysis.\-Unused\-Variable\-Checker.\-written\-Variables = new Hash\-Set$<$string$>$ ()\hspace{0.3cm}{\ttfamily [private]}}}\label{a00163_a0c2fe6eded1b10b135ca2469f5980a39}


Definition at line 194 of file Analyser.\-cs.



The documentation for this class was generated from the following file\-:\begin{DoxyCompactItemize}
\item 
Yarn\-Spinner/\hyperlink{a00279}{Analyser.\-cs}\end{DoxyCompactItemize}
