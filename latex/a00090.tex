\hypertarget{a00090}{\section{Yarn.\-Dialogue Class Reference}
\label{a00090}\index{Yarn.\-Dialogue@{Yarn.\-Dialogue}}
}


The \hyperlink{a00090}{Dialogue} class is the main thing that clients will use.  




Collaboration diagram for Yarn.\-Dialogue\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{a00590}
\end{center}
\end{figure}
\subsection*{Classes}
\begin{DoxyCompactItemize}
\item 
class \hyperlink{a00051}{Command\-Result}
\begin{DoxyCompactList}\small\item\em The client should run a command (it's up to them to parse the string) \end{DoxyCompactList}\item 
class \hyperlink{a00126}{Line\-Result}
\begin{DoxyCompactList}\small\item\em The client should run a line of dialogue. \end{DoxyCompactList}\item 
class \hyperlink{a00132}{Node\-Complete\-Result}
\begin{DoxyCompactList}\small\item\em We've reached the end of this node. \end{DoxyCompactList}\item 
class \hyperlink{a00136}{Option\-Set\-Result}
\begin{DoxyCompactList}\small\item\em The client should show a list of options, and call set\-Selected\-Option\-Delegate before asking for the next line. It's an error if you don't. \end{DoxyCompactList}\item 
class \hyperlink{a00143}{Runner\-Result}
\begin{DoxyCompactList}\small\item\em We'll ask this object for the state of variables. \end{DoxyCompactList}\item 
class \hyperlink{a00149}{Standard\-Library}
\begin{DoxyCompactList}\small\item\em The standard, built-\/in library of functions and operators. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Public Types}
\begin{DoxyCompactItemize}
\item 
enum \hyperlink{a00090_a903f18cdcc66c28ceab5a43c41fe074d}{Compiled\-Format} \{ \hyperlink{a00090_a903f18cdcc66c28ceab5a43c41fe074dab4daca084ad9eabfc8de231929477ed6}{Compiled\-Format.\-V1}
 \}
\end{DoxyCompactItemize}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{a00090_a349debf4c4b8d48e3d80ff31ad380b0e}{Dialogue} (\hyperlink{a00169}{Yarn.\-Variable\-Storage} \hyperlink{a00090_ae94eaa4b03b432422f5d205fabe37ff5}{continuity})
\item 
void \hyperlink{a00090_af868f7f6928d122ca1d1857be433d92b}{Load\-File} (string file\-Name, bool show\-Tokens=false, bool show\-Parse\-Tree=false, string only\-Consider\-Node=null)
\begin{DoxyCompactList}\small\item\em Load a file from disk. \end{DoxyCompactList}\item 
void \hyperlink{a00090_a4bc1ceca26754dc3ec0a2281dfee26ce}{Load\-Compiled\-Program} (byte\mbox{[}$\,$\mbox{]} bytes, string file\-Name, \hyperlink{a00090_a903f18cdcc66c28ceab5a43c41fe074d}{Compiled\-Format} format=\hyperlink{a00090_a3bc83587462ade6a2f7f42cb7576e50e}{L\-A\-T\-E\-S\-T\-\_\-\-F\-O\-R\-M\-A\-T})
\item 
void \hyperlink{a00090_a7b66187877ec8a2bfee2298d3dd16706}{Load\-String} (string text, string file\-Name=\char`\"{}$<$input$>$\char`\"{}, bool show\-Tokens=false, bool show\-Parse\-Tree=false, string only\-Consider\-Node=null)
\begin{DoxyCompactList}\small\item\em Ask the loader to parse a string. \end{DoxyCompactList}\item 
I\-Enumerable\\*
$<$ \hyperlink{a00143}{Yarn.\-Dialogue.\-Runner\-Result} $>$ \hyperlink{a00090_aead84ee50cb113ca45724894290ce9c2}{Run} (string start\-Node=\hyperlink{a00090_a1b643f15f734090e6a58cbf13dafd28f}{D\-E\-F\-A\-U\-L\-T\-\_\-\-S\-T\-A\-R\-T})
\begin{DoxyCompactList}\small\item\em Use this in a for-\/each construct; each time you iterate over it, you'll get a line, command, or set of options. \end{DoxyCompactList}\item 
void \hyperlink{a00090_a7a6cabe5612fdcdc4619460431f85112}{Stop} ()
\item 
Dictionary$<$ string, string $>$ \hyperlink{a00090_a7c83b1fe5474a6610d39eb525f6fc9ce}{Get\-Text\-For\-All\-Nodes} ()
\item 
string \hyperlink{a00090_a594641914a2b59cc5231645273d18e82}{Get\-Text\-For\-Node} (string node\-Name)
\begin{DoxyCompactList}\small\item\em Returns the source code for the node 'node\-Name', if that node was tagged with raw\-Text. \end{DoxyCompactList}\item 
Dictionary$<$ string, \\*
I\-Enumerable$<$ string $>$ $>$ \hyperlink{a00090_a20ef38a17e4a346de3b572b85052c1d1}{Get\-Tags\-For\-All\-Nodes} ()
\item 
I\-Enumerable$<$ string $>$ \hyperlink{a00090_ab85166316a6c5aadce336316406ed164}{Get\-Tags\-For\-Node} (string node\-Name)
\begin{DoxyCompactList}\small\item\em Returns the tags for the node 'node\-Name'. \end{DoxyCompactList}\item 
void \hyperlink{a00090_acfb8561e08dc85c6d9a855ad07d18783}{Add\-String\-Table} (Dictionary$<$ string, string $>$ string\-Table)
\item 
Dictionary$<$ string, string $>$ \hyperlink{a00090_af5fe57ebd11c41208070972f06a31b9d}{Get\-String\-Table} ()
\item 
void \hyperlink{a00090_a7acfe32f91b36ee812059f2ad3011133}{Unload\-All} (bool clear\-Visited\-Nodes=true)
\begin{DoxyCompactList}\small\item\em Unloads A\-L\-L nodes. \end{DoxyCompactList}\item 
\hyperlink{a00050_a301aa7c866593a5b625a8fc158bbeacea27118326006d3829667a400ad23d5d98}{String} \hyperlink{a00090_a7a8a3a461011172f5624da3a8ffa875f}{Compile} ()
\item 
\hyperlink{a00050_a301aa7c866593a5b625a8fc158bbeacea27118326006d3829667a400ad23d5d98}{String} \hyperlink{a00090_aade6c069db8f01572060d25a963d2a14}{Get\-Byte\-Code} ()
\item 
bool \hyperlink{a00090_a93bb76a1f9a4058f225ff4cee97483c6}{Node\-Exists} (string node\-Name)
\item 
void \hyperlink{a00090_a6b67b239f50c062160666e54592c433f}{Analyse} (\hyperlink{a00056}{Analysis.\-Context} context)
\end{DoxyCompactItemize}
\subsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
\hyperlink{a00050_a1e50031b945a3a2afafee6f590730568}{Logger} \hyperlink{a00090_a381f48bb0fbb294f8cf44ca57f11be31}{Log\-Debug\-Message}
\begin{DoxyCompactList}\small\item\em Delegates used for logging. \end{DoxyCompactList}\item 
\hyperlink{a00050_a1e50031b945a3a2afafee6f590730568}{Logger} \hyperlink{a00090_a9801e83dd044d6498fdf6ebcc6bec5ac}{Log\-Error\-Message}
\item 
const string \hyperlink{a00090_a1b643f15f734090e6a58cbf13dafd28f}{D\-E\-F\-A\-U\-L\-T\-\_\-\-S\-T\-A\-R\-T} = \char`\"{}Start\char`\"{}
\begin{DoxyCompactList}\small\item\em The node we start from. \end{DoxyCompactList}\item 
\hyperlink{a00123}{Library} \hyperlink{a00090_ae660d4cfb6e296358d2f61d8ee74c66a}{library}
\begin{DoxyCompactList}\small\item\em The library contains all of the functions and operators we know about. \end{DoxyCompactList}\item 
Dictionary$<$ \hyperlink{a00050_a301aa7c866593a5b625a8fc158bbeacea27118326006d3829667a400ad23d5d98}{String}, int $>$ \hyperlink{a00090_aae9e64354066a1e2fa130629959d772b}{visited\-Node\-Count} = new Dictionary$<$string, int$>$()
\begin{DoxyCompactList}\small\item\em The collection of nodes that we've seen. \end{DoxyCompactList}\item 
const \hyperlink{a00090_a903f18cdcc66c28ceab5a43c41fe074d}{Compiled\-Format} \hyperlink{a00090_a3bc83587462ade6a2f7f42cb7576e50e}{L\-A\-T\-E\-S\-T\-\_\-\-F\-O\-R\-M\-A\-T} = Compiled\-Format.\-V1
\end{DoxyCompactItemize}
\subsection*{Package Functions}
\begin{DoxyCompactItemize}
\item 
Dictionary$<$ string, \hyperlink{a00125}{Line\-Info} $>$ \hyperlink{a00090_a5c5117de678626ebcfb9a6f875e6e53a}{Get\-String\-Info\-Table} ()
\end{DoxyCompactItemize}
\subsection*{Package Attributes}
\begin{DoxyCompactItemize}
\item 
\hyperlink{a00169}{Variable\-Storage} \hyperlink{a00090_ae94eaa4b03b432422f5d205fabe37ff5}{continuity}
\item 
\hyperlink{a00127}{Loader} \hyperlink{a00090_a98bbe0ac2ccadeeeb7e05e3e6e19f2e0}{loader}
\begin{DoxyCompactList}\small\item\em The loader contains all of the nodes we're going to run. \end{DoxyCompactList}\item 
\hyperlink{a00140}{Program} \hyperlink{a00090_a0a1cca92325f430425d784d416cb5c2b}{program}
\begin{DoxyCompactList}\small\item\em The \hyperlink{a00140}{Program} is the compiled \hyperlink{a00050}{Yarn} program. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Properties}
\begin{DoxyCompactItemize}
\item 
I\-Enumerable$<$ string $>$ \hyperlink{a00090_ac5661051e0b7f44527fe526c7766dbbf}{visited\-Nodes}\hspace{0.3cm}{\ttfamily  \mbox{[}get, set\mbox{]}}
\item 
I\-Enumerable$<$ string $>$ \hyperlink{a00090_a0ee573e3d072bccf98ba1d975612d42c}{all\-Nodes}\hspace{0.3cm}{\ttfamily  \mbox{[}get\mbox{]}}
\item 
string \hyperlink{a00090_af368b5c342d585dc6953876c5965ccc8}{current\-Node}\hspace{0.3cm}{\ttfamily  \mbox{[}get\mbox{]}}
\end{DoxyCompactItemize}
\subsection*{Private Member Functions}
\begin{DoxyCompactItemize}
\item 
object \hyperlink{a00090_a10c9f22d3f55e74f091cd6069c431094}{Yarn\-Function\-Node\-Visit\-Count} (\hyperlink{a00167}{Value}\mbox{[}$\,$\mbox{]} parameters)
\begin{DoxyCompactList}\small\item\em A function exposed to \hyperlink{a00050}{Yarn} that returns the number of times a node has been run. \end{DoxyCompactList}\item 
object \hyperlink{a00090_a1ab129bd84381928531d503304ca08d6}{Yarn\-Function\-Is\-Node\-Visited} (\hyperlink{a00167}{Value}\mbox{[}$\,$\mbox{]} parameters)
\begin{DoxyCompactList}\small\item\em A \hyperlink{a00050}{Yarn} function that returns true if the named node, or the current node if no parameters were provided, has been visited at least once. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
\hyperlink{a00147}{Virtual\-Machine} \hyperlink{a00090_a8c1319357a9df6cff051328fb33224c7}{vm}
\end{DoxyCompactItemize}


\subsection{Detailed Description}
The \hyperlink{a00090}{Dialogue} class is the main thing that clients will use. 

Definition at line 155 of file Dialogue.\-cs.



\subsection{Member Enumeration Documentation}
\hypertarget{a00090_a903f18cdcc66c28ceab5a43c41fe074d}{\index{Yarn\-::\-Dialogue@{Yarn\-::\-Dialogue}!Compiled\-Format@{Compiled\-Format}}
\index{Compiled\-Format@{Compiled\-Format}!Yarn::Dialogue@{Yarn\-::\-Dialogue}}
\subsubsection[{Compiled\-Format}]{\setlength{\rightskip}{0pt plus 5cm}enum {\bf Yarn.\-Dialogue.\-Compiled\-Format}}}\label{a00090_a903f18cdcc66c28ceab5a43c41fe074d}
\begin{Desc}
\item[Enumerator]\par
\begin{description}
\index{V1@{V1}!Yarn\-::\-Dialogue@{Yarn\-::\-Dialogue}}\index{Yarn\-::\-Dialogue@{Yarn\-::\-Dialogue}!V1@{V1}}\item[{\em 
\hypertarget{a00090_a903f18cdcc66c28ceab5a43c41fe074dab4daca084ad9eabfc8de231929477ed6}{V1}\label{a00090_a903f18cdcc66c28ceab5a43c41fe074dab4daca084ad9eabfc8de231929477ed6}
}]\end{description}
\end{Desc}


Definition at line 530 of file Dialogue.\-cs.


\begin{DoxyCode}
531         \{
532             \hyperlink{a00090_a903f18cdcc66c28ceab5a43c41fe074dab4daca084ad9eabfc8de231929477ed6}{V1}
533         \}
\end{DoxyCode}


\subsection{Constructor \& Destructor Documentation}
\hypertarget{a00090_a349debf4c4b8d48e3d80ff31ad380b0e}{\index{Yarn\-::\-Dialogue@{Yarn\-::\-Dialogue}!Dialogue@{Dialogue}}
\index{Dialogue@{Dialogue}!Yarn::Dialogue@{Yarn\-::\-Dialogue}}
\subsubsection[{Dialogue}]{\setlength{\rightskip}{0pt plus 5cm}Yarn.\-Dialogue.\-Dialogue (
\begin{DoxyParamCaption}
\item[{{\bf Yarn.\-Variable\-Storage}}]{continuity}
\end{DoxyParamCaption}
)}}\label{a00090_a349debf4c4b8d48e3d80ff31ad380b0e}


Definition at line 275 of file Dialogue.\-cs.



References Yarn.\-Dialogue.\-continuity, Yarn.\-Dialogue.\-library, Yarn.\-Dialogue.\-loader, Yarn.\-Returning\-Function(), Yarn.\-Dialogue.\-Yarn\-Function\-Is\-Node\-Visited(), and Yarn.\-Dialogue.\-Yarn\-Function\-Node\-Visit\-Count().


\begin{DoxyCode}
275                                                          \{
276             this.continuity = \hyperlink{a00090_ae94eaa4b03b432422f5d205fabe37ff5}{continuity};
277             \hyperlink{a00090_a98bbe0ac2ccadeeeb7e05e3e6e19f2e0}{loader} = \textcolor{keyword}{new} Loader (\textcolor{keyword}{this});
278             \hyperlink{a00090_ae660d4cfb6e296358d2f61d8ee74c66a}{library} = \textcolor{keyword}{new} Library ();
279 
280             library.ImportLibrary (\textcolor{keyword}{new} StandardLibrary ());
281 
282             \textcolor{comment}{// Register the "visited" function, which returns true if we've visited}
283             \textcolor{comment}{// a node previously (nodes are marked as visited when we leave them)}
284             library.RegisterFunction (\textcolor{stringliteral}{"visited"}, -1, (\hyperlink{a00050_a5177bf74fbfe7303fac9d8236c2e514b}{ReturningFunction})
      \hyperlink{a00090_a1ab129bd84381928531d503304ca08d6}{YarnFunctionIsNodeVisited});
285 
286             \textcolor{comment}{// Register the "visitCount" function, which returns the number of times}
287             \textcolor{comment}{// a node has been run (which increments when a node ends). If called with}
288             \textcolor{comment}{// no parameters, check the CURRENT node.}
289             library.RegisterFunction (\textcolor{stringliteral}{"visitCount"}, -1, (\hyperlink{a00050_a5177bf74fbfe7303fac9d8236c2e514b}{ReturningFunction})
      \hyperlink{a00090_a10c9f22d3f55e74f091cd6069c431094}{YarnFunctionNodeVisitCount});
290 
291         \}
\end{DoxyCode}


Here is the call graph for this function\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{a00090_a349debf4c4b8d48e3d80ff31ad380b0e_cgraph}
\end{center}
\end{figure}




\subsection{Member Function Documentation}
\hypertarget{a00090_acfb8561e08dc85c6d9a855ad07d18783}{\index{Yarn\-::\-Dialogue@{Yarn\-::\-Dialogue}!Add\-String\-Table@{Add\-String\-Table}}
\index{Add\-String\-Table@{Add\-String\-Table}!Yarn::Dialogue@{Yarn\-::\-Dialogue}}
\subsubsection[{Add\-String\-Table}]{\setlength{\rightskip}{0pt plus 5cm}void Yarn.\-Dialogue.\-Add\-String\-Table (
\begin{DoxyParamCaption}
\item[{Dictionary$<$ string, string $>$}]{string\-Table}
\end{DoxyParamCaption}
)}}\label{a00090_acfb8561e08dc85c6d9a855ad07d18783}


Definition at line 517 of file Dialogue.\-cs.


\begin{DoxyCode}
518         \{
519             program.LoadStrings(stringTable);
520         \}
\end{DoxyCode}
\hypertarget{a00090_a6b67b239f50c062160666e54592c433f}{\index{Yarn\-::\-Dialogue@{Yarn\-::\-Dialogue}!Analyse@{Analyse}}
\index{Analyse@{Analyse}!Yarn::Dialogue@{Yarn\-::\-Dialogue}}
\subsubsection[{Analyse}]{\setlength{\rightskip}{0pt plus 5cm}void Yarn.\-Dialogue.\-Analyse (
\begin{DoxyParamCaption}
\item[{{\bf Analysis.\-Context}}]{context}
\end{DoxyParamCaption}
)}}\label{a00090_a6b67b239f50c062160666e54592c433f}


Definition at line 569 of file Dialogue.\-cs.


\begin{DoxyCode}
569                                                       \{
570 
571             context.AddProgramToAnalysis (this.program);
572 
573         \}
\end{DoxyCode}
\hypertarget{a00090_a7a8a3a461011172f5624da3a8ffa875f}{\index{Yarn\-::\-Dialogue@{Yarn\-::\-Dialogue}!Compile@{Compile}}
\index{Compile@{Compile}!Yarn::Dialogue@{Yarn\-::\-Dialogue}}
\subsubsection[{Compile}]{\setlength{\rightskip}{0pt plus 5cm}{\bf String} Yarn.\-Dialogue.\-Compile (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{a00090_a7a8a3a461011172f5624da3a8ffa875f}


Definition at line 547 of file Dialogue.\-cs.



References Yarn.\-Dialogue.\-library.


\begin{DoxyCode}
547                                 \{
548             \textcolor{keywordflow}{return} program.DumpCode (\hyperlink{a00090_ae660d4cfb6e296358d2f61d8ee74c66a}{library});
549         \}
\end{DoxyCode}
\hypertarget{a00090_aade6c069db8f01572060d25a963d2a14}{\index{Yarn\-::\-Dialogue@{Yarn\-::\-Dialogue}!Get\-Byte\-Code@{Get\-Byte\-Code}}
\index{Get\-Byte\-Code@{Get\-Byte\-Code}!Yarn::Dialogue@{Yarn\-::\-Dialogue}}
\subsubsection[{Get\-Byte\-Code}]{\setlength{\rightskip}{0pt plus 5cm}{\bf String} Yarn.\-Dialogue.\-Get\-Byte\-Code (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{a00090_aade6c069db8f01572060d25a963d2a14}


Definition at line 551 of file Dialogue.\-cs.



References Yarn.\-Dialogue.\-library.


\begin{DoxyCode}
551                                     \{
552             \textcolor{keywordflow}{return} program.DumpCode (\hyperlink{a00090_ae660d4cfb6e296358d2f61d8ee74c66a}{library});
553         \}
\end{DoxyCode}
\hypertarget{a00090_a5c5117de678626ebcfb9a6f875e6e53a}{\index{Yarn\-::\-Dialogue@{Yarn\-::\-Dialogue}!Get\-String\-Info\-Table@{Get\-String\-Info\-Table}}
\index{Get\-String\-Info\-Table@{Get\-String\-Info\-Table}!Yarn::Dialogue@{Yarn\-::\-Dialogue}}
\subsubsection[{Get\-String\-Info\-Table}]{\setlength{\rightskip}{0pt plus 5cm}Dictionary$<$string,{\bf Line\-Info}$>$ Yarn.\-Dialogue.\-Get\-String\-Info\-Table (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [package]}}}\label{a00090_a5c5117de678626ebcfb9a6f875e6e53a}


Definition at line 526 of file Dialogue.\-cs.


\begin{DoxyCode}
526                                                                   \{
527             \textcolor{keywordflow}{return} program.lineInfo;
528         \}
\end{DoxyCode}
\hypertarget{a00090_af5fe57ebd11c41208070972f06a31b9d}{\index{Yarn\-::\-Dialogue@{Yarn\-::\-Dialogue}!Get\-String\-Table@{Get\-String\-Table}}
\index{Get\-String\-Table@{Get\-String\-Table}!Yarn::Dialogue@{Yarn\-::\-Dialogue}}
\subsubsection[{Get\-String\-Table}]{\setlength{\rightskip}{0pt plus 5cm}Dictionary$<$string,string$>$ Yarn.\-Dialogue.\-Get\-String\-Table (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{a00090_af5fe57ebd11c41208070972f06a31b9d}


Definition at line 522 of file Dialogue.\-cs.


\begin{DoxyCode}
522                                                           \{
523             \textcolor{keywordflow}{return} program.strings;
524         \}
\end{DoxyCode}
\hypertarget{a00090_a20ef38a17e4a346de3b572b85052c1d1}{\index{Yarn\-::\-Dialogue@{Yarn\-::\-Dialogue}!Get\-Tags\-For\-All\-Nodes@{Get\-Tags\-For\-All\-Nodes}}
\index{Get\-Tags\-For\-All\-Nodes@{Get\-Tags\-For\-All\-Nodes}!Yarn::Dialogue@{Yarn\-::\-Dialogue}}
\subsubsection[{Get\-Tags\-For\-All\-Nodes}]{\setlength{\rightskip}{0pt plus 5cm}Dictionary$<$string, I\-Enumerable$<$string$>$ $>$ Yarn.\-Dialogue.\-Get\-Tags\-For\-All\-Nodes (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{a00090_a20ef38a17e4a346de3b572b85052c1d1}


Definition at line 489 of file Dialogue.\-cs.



References Yarn.\-Program.\-nodes, and Yarn.\-Dialogue.\-program.


\begin{DoxyCode}
489                                                                             \{
490             var d = \textcolor{keyword}{new} Dictionary<string,IEnumerable<string>>();
491 
492             \textcolor{keywordflow}{foreach} (var node \textcolor{keywordflow}{in} \hyperlink{a00090_a0a1cca92325f430425d784d416cb5c2b}{program}.\hyperlink{a00140_a3f4928a577c88263ad016be259b175c4}{nodes}) \{
493                 var tags = program.GetTagsForNode(node.Key);
494 
495                 \textcolor{keywordflow}{if} (tags == null)
496                     \textcolor{keywordflow}{continue};
497 
498                 d [node.Key] = tags;
499             \}
500 
501             \textcolor{keywordflow}{return} d;
502         \}
\end{DoxyCode}
\hypertarget{a00090_ab85166316a6c5aadce336316406ed164}{\index{Yarn\-::\-Dialogue@{Yarn\-::\-Dialogue}!Get\-Tags\-For\-Node@{Get\-Tags\-For\-Node}}
\index{Get\-Tags\-For\-Node@{Get\-Tags\-For\-Node}!Yarn::Dialogue@{Yarn\-::\-Dialogue}}
\subsubsection[{Get\-Tags\-For\-Node}]{\setlength{\rightskip}{0pt plus 5cm}I\-Enumerable$<$string$>$ Yarn.\-Dialogue.\-Get\-Tags\-For\-Node (
\begin{DoxyParamCaption}
\item[{string}]{node\-Name}
\end{DoxyParamCaption}
)}}\label{a00090_ab85166316a6c5aadce336316406ed164}


Returns the tags for the node 'node\-Name'. 



Definition at line 505 of file Dialogue.\-cs.



References Yarn.\-Dialogue.\-Log\-Error\-Message, Yarn.\-Program.\-nodes, and Yarn.\-Dialogue.\-program.


\begin{DoxyCode}
505                                                                    \{
506             \textcolor{keywordflow}{if} (\hyperlink{a00090_a0a1cca92325f430425d784d416cb5c2b}{program}.\hyperlink{a00140_a3f4928a577c88263ad016be259b175c4}{nodes}.Count == 0) \{
507                 \hyperlink{a00090_a9801e83dd044d6498fdf6ebcc6bec5ac}{LogErrorMessage} (\textcolor{stringliteral}{"No nodes are loaded!"});
508                 \textcolor{keywordflow}{return} null;
509             \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\hyperlink{a00090_a0a1cca92325f430425d784d416cb5c2b}{program}.\hyperlink{a00140_a3f4928a577c88263ad016be259b175c4}{nodes}.ContainsKey(nodeName)) \{
510                 \textcolor{keywordflow}{return} program.GetTagsForNode (nodeName);
511             \} \textcolor{keywordflow}{else} \{
512                 \hyperlink{a00090_a9801e83dd044d6498fdf6ebcc6bec5ac}{LogErrorMessage} (\textcolor{stringliteral}{"No node named "} + nodeName);
513                 \textcolor{keywordflow}{return} null;
514             \}
515         \}
\end{DoxyCode}
\hypertarget{a00090_a7c83b1fe5474a6610d39eb525f6fc9ce}{\index{Yarn\-::\-Dialogue@{Yarn\-::\-Dialogue}!Get\-Text\-For\-All\-Nodes@{Get\-Text\-For\-All\-Nodes}}
\index{Get\-Text\-For\-All\-Nodes@{Get\-Text\-For\-All\-Nodes}!Yarn::Dialogue@{Yarn\-::\-Dialogue}}
\subsubsection[{Get\-Text\-For\-All\-Nodes}]{\setlength{\rightskip}{0pt plus 5cm}Dictionary$<$string, string$>$ Yarn.\-Dialogue.\-Get\-Text\-For\-All\-Nodes (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{a00090_a7c83b1fe5474a6610d39eb525f6fc9ce}


Definition at line 461 of file Dialogue.\-cs.



References Yarn.\-Program.\-nodes, and Yarn.\-Dialogue.\-program.


\begin{DoxyCode}
461                                                                \{
462             var d = \textcolor{keyword}{new} Dictionary<string,string>();
463 
464             \textcolor{keywordflow}{foreach} (var node \textcolor{keywordflow}{in} \hyperlink{a00090_a0a1cca92325f430425d784d416cb5c2b}{program}.\hyperlink{a00140_a3f4928a577c88263ad016be259b175c4}{nodes}) \{
465                 var text = program.GetTextForNode(node.Key);
466 
467                 \textcolor{keywordflow}{if} (text == null)
468                     \textcolor{keywordflow}{continue};
469 
470                 d [node.Key] = text;
471             \}
472 
473             \textcolor{keywordflow}{return} d;
474         \}
\end{DoxyCode}
\hypertarget{a00090_a594641914a2b59cc5231645273d18e82}{\index{Yarn\-::\-Dialogue@{Yarn\-::\-Dialogue}!Get\-Text\-For\-Node@{Get\-Text\-For\-Node}}
\index{Get\-Text\-For\-Node@{Get\-Text\-For\-Node}!Yarn::Dialogue@{Yarn\-::\-Dialogue}}
\subsubsection[{Get\-Text\-For\-Node}]{\setlength{\rightskip}{0pt plus 5cm}string Yarn.\-Dialogue.\-Get\-Text\-For\-Node (
\begin{DoxyParamCaption}
\item[{string}]{node\-Name}
\end{DoxyParamCaption}
)}}\label{a00090_a594641914a2b59cc5231645273d18e82}


Returns the source code for the node 'node\-Name', if that node was tagged with raw\-Text. 



Definition at line 477 of file Dialogue.\-cs.



References Yarn.\-Dialogue.\-Log\-Error\-Message, Yarn.\-Program.\-nodes, and Yarn.\-Dialogue.\-program.


\begin{DoxyCode}
477                                                       \{
478             \textcolor{keywordflow}{if} (\hyperlink{a00090_a0a1cca92325f430425d784d416cb5c2b}{program}.\hyperlink{a00140_a3f4928a577c88263ad016be259b175c4}{nodes}.Count == 0) \{
479                 \hyperlink{a00090_a9801e83dd044d6498fdf6ebcc6bec5ac}{LogErrorMessage} (\textcolor{stringliteral}{"No nodes are loaded!"});
480                 \textcolor{keywordflow}{return} null;
481             \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\hyperlink{a00090_a0a1cca92325f430425d784d416cb5c2b}{program}.\hyperlink{a00140_a3f4928a577c88263ad016be259b175c4}{nodes}.ContainsKey(nodeName)) \{
482                 \textcolor{keywordflow}{return} program.GetTextForNode (nodeName);
483             \} \textcolor{keywordflow}{else} \{
484                 \hyperlink{a00090_a9801e83dd044d6498fdf6ebcc6bec5ac}{LogErrorMessage} (\textcolor{stringliteral}{"No node named "} + nodeName);
485                 \textcolor{keywordflow}{return} null;
486             \}
487         \}
\end{DoxyCode}
\hypertarget{a00090_a4bc1ceca26754dc3ec0a2281dfee26ce}{\index{Yarn\-::\-Dialogue@{Yarn\-::\-Dialogue}!Load\-Compiled\-Program@{Load\-Compiled\-Program}}
\index{Load\-Compiled\-Program@{Load\-Compiled\-Program}!Yarn::Dialogue@{Yarn\-::\-Dialogue}}
\subsubsection[{Load\-Compiled\-Program}]{\setlength{\rightskip}{0pt plus 5cm}void Yarn.\-Dialogue.\-Load\-Compiled\-Program (
\begin{DoxyParamCaption}
\item[{byte\mbox{[}$\,$\mbox{]}}]{bytes, }
\item[{string}]{file\-Name, }
\item[{{\bf Compiled\-Format}}]{format = {\ttfamily {\bf L\-A\-T\-E\-S\-T\-\_\-\-F\-O\-R\-M\-A\-T}}}
\end{DoxyParamCaption}
)}}\label{a00090_a4bc1ceca26754dc3ec0a2281dfee26ce}


Definition at line 316 of file Dialogue.\-cs.



Referenced by Yarn.\-Dialogue.\-Load\-File().


\begin{DoxyCode}
317         \{
318 
319             \textcolor{keywordflow}{throw} \textcolor{keyword}{new} NotImplementedException(\textcolor{stringliteral}{"Loading compiled programs is not currently implemented."});
320             
321         \}
\end{DoxyCode}


Here is the caller graph for this function\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{a00090_a4bc1ceca26754dc3ec0a2281dfee26ce_icgraph}
\end{center}
\end{figure}


\hypertarget{a00090_af868f7f6928d122ca1d1857be433d92b}{\index{Yarn\-::\-Dialogue@{Yarn\-::\-Dialogue}!Load\-File@{Load\-File}}
\index{Load\-File@{Load\-File}!Yarn::Dialogue@{Yarn\-::\-Dialogue}}
\subsubsection[{Load\-File}]{\setlength{\rightskip}{0pt plus 5cm}void Yarn.\-Dialogue.\-Load\-File (
\begin{DoxyParamCaption}
\item[{string}]{file\-Name, }
\item[{bool}]{show\-Tokens = {\ttfamily false}, }
\item[{bool}]{show\-Parse\-Tree = {\ttfamily false}, }
\item[{string}]{only\-Consider\-Node = {\ttfamily null}}
\end{DoxyParamCaption}
)}}\label{a00090_af868f7f6928d122ca1d1857be433d92b}


Load a file from disk. 



Definition at line 294 of file Dialogue.\-cs.



References Yarn.\-Dialogue.\-Load\-Compiled\-Program(), and Yarn.\-Dialogue.\-Load\-String().


\begin{DoxyCode}
294                                                                                                            
                            \{
295 
296             \textcolor{comment}{// Is this a compiled program file?}
297             \textcolor{keywordflow}{if} (fileName.EndsWith(\textcolor{stringliteral}{".yarn.bytes"}, StringComparison.InvariantCulture)) \{
298 
299                 var bytes = System.IO.File.ReadAllBytes(fileName);
300                 \hyperlink{a00090_a4bc1ceca26754dc3ec0a2281dfee26ce}{LoadCompiledProgram}(bytes, fileName);
301 
302                 \textcolor{keywordflow}{return};
303             \} \textcolor{keywordflow}{else} \{
304                 \textcolor{comment}{// It's source code, either a single node in text form or a JSON file}
305                 \textcolor{keywordtype}{string} inputString;
306                 \textcolor{keyword}{using} (System.IO.StreamReader reader = \textcolor{keyword}{new} System.IO.StreamReader(fileName))
307                 \{
308                     inputString = reader.ReadToEnd();
309                 \}
310 
311                 \hyperlink{a00090_a7b66187877ec8a2bfee2298d3dd16706}{LoadString}(inputString, fileName, showTokens, showParseTree, onlyConsiderNode);
312             \}
313 
314         \}
\end{DoxyCode}


Here is the call graph for this function\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{a00090_af868f7f6928d122ca1d1857be433d92b_cgraph}
\end{center}
\end{figure}


\hypertarget{a00090_a7b66187877ec8a2bfee2298d3dd16706}{\index{Yarn\-::\-Dialogue@{Yarn\-::\-Dialogue}!Load\-String@{Load\-String}}
\index{Load\-String@{Load\-String}!Yarn::Dialogue@{Yarn\-::\-Dialogue}}
\subsubsection[{Load\-String}]{\setlength{\rightskip}{0pt plus 5cm}void Yarn.\-Dialogue.\-Load\-String (
\begin{DoxyParamCaption}
\item[{string}]{text, }
\item[{string}]{file\-Name = {\ttfamily \char`\"{}$<$input$>$\char`\"{}}, }
\item[{bool}]{show\-Tokens = {\ttfamily false}, }
\item[{bool}]{show\-Parse\-Tree = {\ttfamily false}, }
\item[{string}]{only\-Consider\-Node = {\ttfamily null}}
\end{DoxyParamCaption}
)}}\label{a00090_a7b66187877ec8a2bfee2298d3dd16706}


Ask the loader to parse a string. 

Returns the number of nodes that were loaded. 

Definition at line 327 of file Dialogue.\-cs.



References Yarn.\-Dialogue.\-library, Yarn.\-Dialogue.\-Log\-Debug\-Message, Yarn.\-Dialogue.\-Log\-Error\-Message, and Yarn.\-Dialogue.\-program.



Referenced by Yarn.\-Dialogue.\-Load\-File().


\begin{DoxyCode}
327                                                                                                            
                                                 \{
328 
329             \textcolor{keywordflow}{if} (\hyperlink{a00090_a381f48bb0fbb294f8cf44ca57f11be31}{LogDebugMessage} == null) \{
330                 \textcolor{keywordflow}{throw} \textcolor{keyword}{new} YarnException (\textcolor{stringliteral}{"LogDebugMessage must be set before loading"});
331             \}
332 
333             \textcolor{keywordflow}{if} (\hyperlink{a00090_a9801e83dd044d6498fdf6ebcc6bec5ac}{LogErrorMessage} == null) \{
334                 \textcolor{keywordflow}{throw} \textcolor{keyword}{new} YarnException (\textcolor{stringliteral}{"LogErrorMessage must be set before loading"});
335             \}
336 
337             \textcolor{comment}{// Try to infer the type}
338 
339             \hyperlink{a00050_ad7ebb46e7309ead8767383a672b3272f}{NodeFormat} format;
340 
341             \textcolor{keywordflow}{if} (text.StartsWith(\textcolor{stringliteral}{"["}, StringComparison.Ordinal)) \{
342                 \textcolor{comment}{// starts with a [? this is probably a JSON array, in which}
343                 \textcolor{comment}{// case we need to reject this.}
344 
345                 \textcolor{keywordflow}{throw} \textcolor{keyword}{new} YarnException(\textcolor{stringliteral}{"This input appears to be a JSON file. Support for loading JSON was
       removed in version 1.0; please re-save your document as a Yarn text file."});
346                 
347             \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (text.Contains(\textcolor{stringliteral}{"---"})) \{
348                 \textcolor{comment}{// contains a --- delimiter? probably multi node text}
349                 format = NodeFormat.Text;
350             \} \textcolor{keywordflow}{else} \{
351                 \textcolor{comment}{// fall back to the single node format}
352                 format = NodeFormat.SingleNodeText;
353             \}
354 
355             \hyperlink{a00090_a0a1cca92325f430425d784d416cb5c2b}{program} = loader.Load(text, \hyperlink{a00090_ae660d4cfb6e296358d2f61d8ee74c66a}{library}, fileName, \hyperlink{a00090_a0a1cca92325f430425d784d416cb5c2b}{program}, showTokens, 
      showParseTree, onlyConsiderNode, format);
356 
357         \}
\end{DoxyCode}


Here is the caller graph for this function\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{a00090_a7b66187877ec8a2bfee2298d3dd16706_icgraph}
\end{center}
\end{figure}


\hypertarget{a00090_a93bb76a1f9a4058f225ff4cee97483c6}{\index{Yarn\-::\-Dialogue@{Yarn\-::\-Dialogue}!Node\-Exists@{Node\-Exists}}
\index{Node\-Exists@{Node\-Exists}!Yarn::Dialogue@{Yarn\-::\-Dialogue}}
\subsubsection[{Node\-Exists}]{\setlength{\rightskip}{0pt plus 5cm}bool Yarn.\-Dialogue.\-Node\-Exists (
\begin{DoxyParamCaption}
\item[{string}]{node\-Name}
\end{DoxyParamCaption}
)}}\label{a00090_a93bb76a1f9a4058f225ff4cee97483c6}


Definition at line 555 of file Dialogue.\-cs.



References Yarn.\-Dialogue.\-Log\-Debug\-Message, Yarn.\-Dialogue.\-Log\-Error\-Message, Yarn.\-Program.\-nodes, and Yarn.\-Dialogue.\-program.



Referenced by Yarn.\-Dialogue.\-Yarn\-Function\-Node\-Visit\-Count().


\begin{DoxyCode}
555                                                 \{
556             \textcolor{keywordflow}{if} (\hyperlink{a00090_a0a1cca92325f430425d784d416cb5c2b}{program} == null) \{
557                 \hyperlink{a00090_a9801e83dd044d6498fdf6ebcc6bec5ac}{LogErrorMessage} (\textcolor{stringliteral}{"Tried to call NodeExists, but no nodes "} +
558                                  \textcolor{stringliteral}{"have been compiled!"});
559                 \textcolor{keywordflow}{return} \textcolor{keyword}{false};
560             \}
561             \textcolor{keywordflow}{if} (\hyperlink{a00090_a0a1cca92325f430425d784d416cb5c2b}{program}.\hyperlink{a00140_a3f4928a577c88263ad016be259b175c4}{nodes} == null || \hyperlink{a00090_a0a1cca92325f430425d784d416cb5c2b}{program}.\hyperlink{a00140_a3f4928a577c88263ad016be259b175c4}{nodes}.Count == 0) \{
562                 \hyperlink{a00090_a381f48bb0fbb294f8cf44ca57f11be31}{LogDebugMessage} (\textcolor{stringliteral}{"Called NodeExists, but there are zero nodes. "} +
563                                  \textcolor{stringliteral}{"This may be an error."});
564                 \textcolor{keywordflow}{return} \textcolor{keyword}{false};
565             \}
566             \textcolor{keywordflow}{return} program.nodes.ContainsKey(nodeName);
567         \}
\end{DoxyCode}


Here is the caller graph for this function\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{a00090_a93bb76a1f9a4058f225ff4cee97483c6_icgraph}
\end{center}
\end{figure}


\hypertarget{a00090_aead84ee50cb113ca45724894290ce9c2}{\index{Yarn\-::\-Dialogue@{Yarn\-::\-Dialogue}!Run@{Run}}
\index{Run@{Run}!Yarn::Dialogue@{Yarn\-::\-Dialogue}}
\subsubsection[{Run}]{\setlength{\rightskip}{0pt plus 5cm}I\-Enumerable$<${\bf Yarn.\-Dialogue.\-Runner\-Result}$>$ Yarn.\-Dialogue.\-Run (
\begin{DoxyParamCaption}
\item[{string}]{start\-Node = {\ttfamily {\bf D\-E\-F\-A\-U\-L\-T\-\_\-\-S\-T\-A\-R\-T}}}
\end{DoxyParamCaption}
)}}\label{a00090_aead84ee50cb113ca45724894290ce9c2}


Use this in a for-\/each construct; each time you iterate over it, you'll get a line, command, or set of options. 



Definition at line 365 of file Dialogue.\-cs.



References Yarn.\-Virtual\-Machine.\-execution\-State, Yarn.\-Dialogue.\-Log\-Debug\-Message, Yarn.\-Dialogue.\-Log\-Error\-Message, Yarn.\-Dialogue.\-program, Yarn.\-Virtual\-Machine.\-Set\-Node(), Yarn.\-Dialogue.\-visited\-Node\-Count, and Yarn.\-Dialogue.\-vm.



Referenced by Yarn.\-Yarn\-Spinner\-Console.\-Run().


\begin{DoxyCode}
365                                                                                              \{
366 
367             \textcolor{keywordflow}{if} (\hyperlink{a00090_a381f48bb0fbb294f8cf44ca57f11be31}{LogDebugMessage} == null) \{
368                 \textcolor{keywordflow}{throw} \textcolor{keyword}{new} YarnException (\textcolor{stringliteral}{"LogDebugMessage must be set before running"});
369             \}
370 
371             \textcolor{keywordflow}{if} (\hyperlink{a00090_a9801e83dd044d6498fdf6ebcc6bec5ac}{LogErrorMessage} == null) \{
372                 \textcolor{keywordflow}{throw} \textcolor{keyword}{new} YarnException (\textcolor{stringliteral}{"LogErrorMessage must be set before running"});
373             \}
374 
375             \textcolor{keywordflow}{if} (\hyperlink{a00090_a0a1cca92325f430425d784d416cb5c2b}{program} == null) \{
376                 \hyperlink{a00090_a9801e83dd044d6498fdf6ebcc6bec5ac}{LogErrorMessage} (\textcolor{stringliteral}{"Dialogue.Run was called, but no program was loaded.
       Stopping."});
377                 yield \textcolor{keywordflow}{break};
378             \}
379 
380             \hyperlink{a00090_a8c1319357a9df6cff051328fb33224c7}{vm} = \textcolor{keyword}{new} VirtualMachine (\textcolor{keyword}{this}, \hyperlink{a00090_a0a1cca92325f430425d784d416cb5c2b}{program});
381 
382             RunnerResult latestResult;
383 
384             vm.lineHandler = delegate(LineResult result) \{
385                 latestResult = result;
386             \};
387 
388             vm.commandHandler = delegate(CommandResult result) \{
389                 \textcolor{comment}{// Is it the special custom command "<<stop>>"?}
390                 \textcolor{keywordflow}{if} (result is CommandResult && (result as CommandResult).command.text == \textcolor{stringliteral}{"stop"}) \{
391                     vm.Stop();
392                 \}
393                 latestResult = result;
394             \};
395 
396             vm.nodeCompleteHandler = delegate(NodeCompleteResult result) \{
397 
398                 \textcolor{comment}{// get the count if it's there, otherwise it defaults to 0}
399                 \textcolor{keywordtype}{int} count = 0;
400                 visitedNodeCount.TryGetValue(vm.currentNodeName, out count);
401 
402                 \hyperlink{a00090_aae9e64354066a1e2fa130629959d772b}{visitedNodeCount}[vm.currentNodeName] = count + 1;
403                 latestResult = result;
404             \};
405 
406             vm.optionsHandler = delegate(OptionSetResult result) \{
407                 latestResult = result;
408             \};
409 
410             \textcolor{keywordflow}{if} (\hyperlink{a00090_a8c1319357a9df6cff051328fb33224c7}{vm}.\hyperlink{a00147_a6364593ea1115d65e34b343422cfbbbd}{SetNode} (startNode) == \textcolor{keyword}{false}) \{
411                 yield \textcolor{keywordflow}{break};
412             \}
413 
414             \textcolor{comment}{// Run until the program stops, pausing to yield important}
415             \textcolor{comment}{// results}
416             \textcolor{keywordflow}{do} \{
417 
418                 latestResult = null;
419                 vm.RunNext ();
420                 \textcolor{keywordflow}{if} (latestResult != null)
421                     yield \textcolor{keywordflow}{return} latestResult;
422 
423             \} \textcolor{keywordflow}{while} (\hyperlink{a00090_a8c1319357a9df6cff051328fb33224c7}{vm}.\hyperlink{a00147_a66491da06023dabfb63d09e6ccbba74f}{executionState} != VirtualMachine.ExecutionState.Stopped);
424 
425         \}
\end{DoxyCode}


Here is the call graph for this function\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{a00090_aead84ee50cb113ca45724894290ce9c2_cgraph}
\end{center}
\end{figure}




Here is the caller graph for this function\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{a00090_aead84ee50cb113ca45724894290ce9c2_icgraph}
\end{center}
\end{figure}


\hypertarget{a00090_a7a6cabe5612fdcdc4619460431f85112}{\index{Yarn\-::\-Dialogue@{Yarn\-::\-Dialogue}!Stop@{Stop}}
\index{Stop@{Stop}!Yarn::Dialogue@{Yarn\-::\-Dialogue}}
\subsubsection[{Stop}]{\setlength{\rightskip}{0pt plus 5cm}void Yarn.\-Dialogue.\-Stop (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{a00090_a7a6cabe5612fdcdc4619460431f85112}


Definition at line 427 of file Dialogue.\-cs.



References Yarn.\-Dialogue.\-vm.


\begin{DoxyCode}
427                            \{
428             \textcolor{keywordflow}{if} (\hyperlink{a00090_a8c1319357a9df6cff051328fb33224c7}{vm} != null)
429                 vm.Stop();
430         \}
\end{DoxyCode}
\hypertarget{a00090_a7acfe32f91b36ee812059f2ad3011133}{\index{Yarn\-::\-Dialogue@{Yarn\-::\-Dialogue}!Unload\-All@{Unload\-All}}
\index{Unload\-All@{Unload\-All}!Yarn::Dialogue@{Yarn\-::\-Dialogue}}
\subsubsection[{Unload\-All}]{\setlength{\rightskip}{0pt plus 5cm}void Yarn.\-Dialogue.\-Unload\-All (
\begin{DoxyParamCaption}
\item[{bool}]{clear\-Visited\-Nodes = {\ttfamily true}}
\end{DoxyParamCaption}
)}}\label{a00090_a7acfe32f91b36ee812059f2ad3011133}


Unloads A\-L\-L nodes. 



Definition at line 538 of file Dialogue.\-cs.



References Yarn.\-Dialogue.\-program.


\begin{DoxyCode}
538                                                              \{
539             \textcolor{keywordflow}{if} (clearVisitedNodes)
540                 visitedNodeCount.Clear();
541 
542             \hyperlink{a00090_a0a1cca92325f430425d784d416cb5c2b}{program} = null;
543 
544         \}
\end{DoxyCode}
\hypertarget{a00090_a1ab129bd84381928531d503304ca08d6}{\index{Yarn\-::\-Dialogue@{Yarn\-::\-Dialogue}!Yarn\-Function\-Is\-Node\-Visited@{Yarn\-Function\-Is\-Node\-Visited}}
\index{Yarn\-Function\-Is\-Node\-Visited@{Yarn\-Function\-Is\-Node\-Visited}!Yarn::Dialogue@{Yarn\-::\-Dialogue}}
\subsubsection[{Yarn\-Function\-Is\-Node\-Visited}]{\setlength{\rightskip}{0pt plus 5cm}object Yarn.\-Dialogue.\-Yarn\-Function\-Is\-Node\-Visited (
\begin{DoxyParamCaption}
\item[{{\bf Value}\mbox{[}$\,$\mbox{]}}]{parameters}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}}\label{a00090_a1ab129bd84381928531d503304ca08d6}


A \hyperlink{a00050}{Yarn} function that returns true if the named node, or the current node if no parameters were provided, has been visited at least once. 



Definition at line 270 of file Dialogue.\-cs.



References Yarn.\-Dialogue.\-Yarn\-Function\-Node\-Visit\-Count().



Referenced by Yarn.\-Dialogue.\-Dialogue().


\begin{DoxyCode}
271         \{
272             \textcolor{keywordflow}{return} (\textcolor{keywordtype}{int})\hyperlink{a00090_a10c9f22d3f55e74f091cd6069c431094}{YarnFunctionNodeVisitCount}(parameters) > 0;
273         \}
\end{DoxyCode}


Here is the call graph for this function\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{a00090_a1ab129bd84381928531d503304ca08d6_cgraph}
\end{center}
\end{figure}




Here is the caller graph for this function\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{a00090_a1ab129bd84381928531d503304ca08d6_icgraph}
\end{center}
\end{figure}


\hypertarget{a00090_a10c9f22d3f55e74f091cd6069c431094}{\index{Yarn\-::\-Dialogue@{Yarn\-::\-Dialogue}!Yarn\-Function\-Node\-Visit\-Count@{Yarn\-Function\-Node\-Visit\-Count}}
\index{Yarn\-Function\-Node\-Visit\-Count@{Yarn\-Function\-Node\-Visit\-Count}!Yarn::Dialogue@{Yarn\-::\-Dialogue}}
\subsubsection[{Yarn\-Function\-Node\-Visit\-Count}]{\setlength{\rightskip}{0pt plus 5cm}object Yarn.\-Dialogue.\-Yarn\-Function\-Node\-Visit\-Count (
\begin{DoxyParamCaption}
\item[{{\bf Value}\mbox{[}$\,$\mbox{]}}]{parameters}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}}\label{a00090_a10c9f22d3f55e74f091cd6069c431094}


A function exposed to \hyperlink{a00050}{Yarn} that returns the number of times a node has been run. 

If no parameters are supplied, returns the number of time the current node has been run. 

Definition at line 236 of file Dialogue.\-cs.



References Yarn.\-Dialogue.\-Log\-Error\-Message, and Yarn.\-Dialogue.\-Node\-Exists().



Referenced by Yarn.\-Dialogue.\-Dialogue(), and Yarn.\-Dialogue.\-Yarn\-Function\-Is\-Node\-Visited().


\begin{DoxyCode}
237         \{
238             \textcolor{comment}{// Determine the node we're checking}
239             \textcolor{keywordtype}{string} nodeName;
240 
241             \textcolor{keywordflow}{if} (parameters.Length == 0) \{
242                 \textcolor{comment}{// No parameters? Check the current node}
243                 nodeName = vm.currentNodeName;
244             \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (parameters.Length == 1) \{
245                 \textcolor{comment}{// A parameter? Check the named node}
246                 nodeName = parameters [0].AsString;
247 
248                 \textcolor{comment}{// Ensure this node exists}
249                 \textcolor{keywordflow}{if} (\hyperlink{a00090_a93bb76a1f9a4058f225ff4cee97483c6}{NodeExists} (nodeName) == \textcolor{keyword}{false}) \{
250                     var errorMessage = string.Format (CultureInfo.CurrentCulture, \textcolor{stringliteral}{"The node \{0\} does not "} 
      + \textcolor{stringliteral}{"exist."}, nodeName);
251                     \hyperlink{a00090_a9801e83dd044d6498fdf6ebcc6bec5ac}{LogErrorMessage} (errorMessage);
252                     \textcolor{keywordflow}{return} 0;
253                 \}
254             \} \textcolor{keywordflow}{else} \{
255                 \textcolor{comment}{// We got too many parameters}
256                 var errorMessage = string.Format (CultureInfo.CurrentCulture, \textcolor{stringliteral}{"Incorrect number of
       parameters to "} + \textcolor{stringliteral}{"visitCount (expected 0 or 1, got \{0\})"}, parameters.Length);
257                 \hyperlink{a00090_a9801e83dd044d6498fdf6ebcc6bec5ac}{LogErrorMessage} (errorMessage);
258                 \textcolor{keywordflow}{return} 0;
259             \}
260 
261             \textcolor{comment}{// Figure out how many times this node was run}
262             \textcolor{keywordtype}{int} visitCount = 0;
263             visitedNodeCount.TryGetValue (nodeName, out visitCount);
264 
265             \textcolor{keywordflow}{return} visitCount;
266         \}
\end{DoxyCode}


Here is the call graph for this function\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{a00090_a10c9f22d3f55e74f091cd6069c431094_cgraph}
\end{center}
\end{figure}




Here is the caller graph for this function\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{a00090_a10c9f22d3f55e74f091cd6069c431094_icgraph}
\end{center}
\end{figure}




\subsection{Member Data Documentation}
\hypertarget{a00090_ae94eaa4b03b432422f5d205fabe37ff5}{\index{Yarn\-::\-Dialogue@{Yarn\-::\-Dialogue}!continuity@{continuity}}
\index{continuity@{continuity}!Yarn::Dialogue@{Yarn\-::\-Dialogue}}
\subsubsection[{continuity}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Variable\-Storage} Yarn.\-Dialogue.\-continuity\hspace{0.3cm}{\ttfamily [package]}}}\label{a00090_ae94eaa4b03b432422f5d205fabe37ff5}


Definition at line 158 of file Dialogue.\-cs.



Referenced by Yarn.\-Dialogue.\-Dialogue(), and Yarn.\-Virtual\-Machine.\-Run\-Instruction().

\hypertarget{a00090_a1b643f15f734090e6a58cbf13dafd28f}{\index{Yarn\-::\-Dialogue@{Yarn\-::\-Dialogue}!D\-E\-F\-A\-U\-L\-T\-\_\-\-S\-T\-A\-R\-T@{D\-E\-F\-A\-U\-L\-T\-\_\-\-S\-T\-A\-R\-T}}
\index{D\-E\-F\-A\-U\-L\-T\-\_\-\-S\-T\-A\-R\-T@{D\-E\-F\-A\-U\-L\-T\-\_\-\-S\-T\-A\-R\-T}!Yarn::Dialogue@{Yarn\-::\-Dialogue}}
\subsubsection[{D\-E\-F\-A\-U\-L\-T\-\_\-\-S\-T\-A\-R\-T}]{\setlength{\rightskip}{0pt plus 5cm}const string Yarn.\-Dialogue.\-D\-E\-F\-A\-U\-L\-T\-\_\-\-S\-T\-A\-R\-T = \char`\"{}Start\char`\"{}}}\label{a00090_a1b643f15f734090e6a58cbf13dafd28f}


The node we start from. 



Definition at line 218 of file Dialogue.\-cs.

\hypertarget{a00090_a3bc83587462ade6a2f7f42cb7576e50e}{\index{Yarn\-::\-Dialogue@{Yarn\-::\-Dialogue}!L\-A\-T\-E\-S\-T\-\_\-\-F\-O\-R\-M\-A\-T@{L\-A\-T\-E\-S\-T\-\_\-\-F\-O\-R\-M\-A\-T}}
\index{L\-A\-T\-E\-S\-T\-\_\-\-F\-O\-R\-M\-A\-T@{L\-A\-T\-E\-S\-T\-\_\-\-F\-O\-R\-M\-A\-T}!Yarn::Dialogue@{Yarn\-::\-Dialogue}}
\subsubsection[{L\-A\-T\-E\-S\-T\-\_\-\-F\-O\-R\-M\-A\-T}]{\setlength{\rightskip}{0pt plus 5cm}const {\bf Compiled\-Format} Yarn.\-Dialogue.\-L\-A\-T\-E\-S\-T\-\_\-\-F\-O\-R\-M\-A\-T = Compiled\-Format.\-V1}}\label{a00090_a3bc83587462ade6a2f7f42cb7576e50e}


Definition at line 535 of file Dialogue.\-cs.

\hypertarget{a00090_ae660d4cfb6e296358d2f61d8ee74c66a}{\index{Yarn\-::\-Dialogue@{Yarn\-::\-Dialogue}!library@{library}}
\index{library@{library}!Yarn::Dialogue@{Yarn\-::\-Dialogue}}
\subsubsection[{library}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Library} Yarn.\-Dialogue.\-library}}\label{a00090_ae660d4cfb6e296358d2f61d8ee74c66a}


The library contains all of the functions and operators we know about. 



Definition at line 227 of file Dialogue.\-cs.



Referenced by Yarn.\-Dialogue.\-Compile(), Yarn.\-Dialogue.\-Dialogue(), Yarn.\-Dialogue.\-Get\-Byte\-Code(), Yarn.\-Dialogue.\-Load\-String(), and Yarn.\-Virtual\-Machine.\-Run\-Instruction().

\hypertarget{a00090_a98bbe0ac2ccadeeeb7e05e3e6e19f2e0}{\index{Yarn\-::\-Dialogue@{Yarn\-::\-Dialogue}!loader@{loader}}
\index{loader@{loader}!Yarn::Dialogue@{Yarn\-::\-Dialogue}}
\subsubsection[{loader}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Loader} Yarn.\-Dialogue.\-loader\hspace{0.3cm}{\ttfamily [package]}}}\label{a00090_a98bbe0ac2ccadeeeb7e05e3e6e19f2e0}


The loader contains all of the nodes we're going to run. 



Definition at line 221 of file Dialogue.\-cs.



Referenced by Yarn.\-Dialogue.\-Dialogue().

\hypertarget{a00090_a381f48bb0fbb294f8cf44ca57f11be31}{\index{Yarn\-::\-Dialogue@{Yarn\-::\-Dialogue}!Log\-Debug\-Message@{Log\-Debug\-Message}}
\index{Log\-Debug\-Message@{Log\-Debug\-Message}!Yarn::Dialogue@{Yarn\-::\-Dialogue}}
\subsubsection[{Log\-Debug\-Message}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Logger} Yarn.\-Dialogue.\-Log\-Debug\-Message}}\label{a00090_a381f48bb0fbb294f8cf44ca57f11be31}


Delegates used for logging. 



Definition at line 214 of file Dialogue.\-cs.



Referenced by Yarn.\-Dialogue.\-Load\-String(), Yarn.\-Dialogue.\-Node\-Exists(), and Yarn.\-Dialogue.\-Run().

\hypertarget{a00090_a9801e83dd044d6498fdf6ebcc6bec5ac}{\index{Yarn\-::\-Dialogue@{Yarn\-::\-Dialogue}!Log\-Error\-Message@{Log\-Error\-Message}}
\index{Log\-Error\-Message@{Log\-Error\-Message}!Yarn::Dialogue@{Yarn\-::\-Dialogue}}
\subsubsection[{Log\-Error\-Message}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Logger} Yarn.\-Dialogue.\-Log\-Error\-Message}}\label{a00090_a9801e83dd044d6498fdf6ebcc6bec5ac}


Definition at line 215 of file Dialogue.\-cs.



Referenced by Yarn.\-Dialogue.\-Get\-Tags\-For\-Node(), Yarn.\-Dialogue.\-Get\-Text\-For\-Node(), Yarn.\-Dialogue.\-Load\-String(), Yarn.\-Dialogue.\-Node\-Exists(), Yarn.\-Dialogue.\-Run(), and Yarn.\-Dialogue.\-Yarn\-Function\-Node\-Visit\-Count().

\hypertarget{a00090_a0a1cca92325f430425d784d416cb5c2b}{\index{Yarn\-::\-Dialogue@{Yarn\-::\-Dialogue}!program@{program}}
\index{program@{program}!Yarn::Dialogue@{Yarn\-::\-Dialogue}}
\subsubsection[{program}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Program} Yarn.\-Dialogue.\-program\hspace{0.3cm}{\ttfamily [package]}}}\label{a00090_a0a1cca92325f430425d784d416cb5c2b}


The \hyperlink{a00140}{Program} is the compiled \hyperlink{a00050}{Yarn} program. 



Definition at line 224 of file Dialogue.\-cs.



Referenced by Yarn.\-Dialogue.\-Get\-Tags\-For\-All\-Nodes(), Yarn.\-Dialogue.\-Get\-Tags\-For\-Node(), Yarn.\-Dialogue.\-Get\-Text\-For\-All\-Nodes(), Yarn.\-Dialogue.\-Get\-Text\-For\-Node(), Yarn.\-Dialogue.\-Load\-String(), Yarn.\-Dialogue.\-Node\-Exists(), Yarn.\-Dialogue.\-Run(), and Yarn.\-Dialogue.\-Unload\-All().

\hypertarget{a00090_aae9e64354066a1e2fa130629959d772b}{\index{Yarn\-::\-Dialogue@{Yarn\-::\-Dialogue}!visited\-Node\-Count@{visited\-Node\-Count}}
\index{visited\-Node\-Count@{visited\-Node\-Count}!Yarn::Dialogue@{Yarn\-::\-Dialogue}}
\subsubsection[{visited\-Node\-Count}]{\setlength{\rightskip}{0pt plus 5cm}Dictionary$<${\bf String}, int$>$ Yarn.\-Dialogue.\-visited\-Node\-Count = new Dictionary$<$string, int$>$()}}\label{a00090_aae9e64354066a1e2fa130629959d772b}


The collection of nodes that we've seen. 



Definition at line 230 of file Dialogue.\-cs.



Referenced by Yarn.\-Dialogue.\-Run().

\hypertarget{a00090_a8c1319357a9df6cff051328fb33224c7}{\index{Yarn\-::\-Dialogue@{Yarn\-::\-Dialogue}!vm@{vm}}
\index{vm@{vm}!Yarn::Dialogue@{Yarn\-::\-Dialogue}}
\subsubsection[{vm}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Virtual\-Machine} Yarn.\-Dialogue.\-vm\hspace{0.3cm}{\ttfamily [private]}}}\label{a00090_a8c1319357a9df6cff051328fb33224c7}


Definition at line 359 of file Dialogue.\-cs.



Referenced by Yarn.\-Dialogue.\-Run(), and Yarn.\-Dialogue.\-Stop().



\subsection{Property Documentation}
\hypertarget{a00090_a0ee573e3d072bccf98ba1d975612d42c}{\index{Yarn\-::\-Dialogue@{Yarn\-::\-Dialogue}!all\-Nodes@{all\-Nodes}}
\index{all\-Nodes@{all\-Nodes}!Yarn::Dialogue@{Yarn\-::\-Dialogue}}
\subsubsection[{all\-Nodes}]{\setlength{\rightskip}{0pt plus 5cm}I\-Enumerable$<$string$>$ Yarn.\-Dialogue.\-all\-Nodes\hspace{0.3cm}{\ttfamily [get]}}}\label{a00090_a0ee573e3d072bccf98ba1d975612d42c}


Definition at line 444 of file Dialogue.\-cs.

\hypertarget{a00090_af368b5c342d585dc6953876c5965ccc8}{\index{Yarn\-::\-Dialogue@{Yarn\-::\-Dialogue}!current\-Node@{current\-Node}}
\index{current\-Node@{current\-Node}!Yarn::Dialogue@{Yarn\-::\-Dialogue}}
\subsubsection[{current\-Node}]{\setlength{\rightskip}{0pt plus 5cm}string Yarn.\-Dialogue.\-current\-Node\hspace{0.3cm}{\ttfamily [get]}}}\label{a00090_af368b5c342d585dc6953876c5965ccc8}


Definition at line 450 of file Dialogue.\-cs.

\hypertarget{a00090_ac5661051e0b7f44527fe526c7766dbbf}{\index{Yarn\-::\-Dialogue@{Yarn\-::\-Dialogue}!visited\-Nodes@{visited\-Nodes}}
\index{visited\-Nodes@{visited\-Nodes}!Yarn::Dialogue@{Yarn\-::\-Dialogue}}
\subsubsection[{visited\-Nodes}]{\setlength{\rightskip}{0pt plus 5cm}I\-Enumerable$<$string$>$ Yarn.\-Dialogue.\-visited\-Nodes\hspace{0.3cm}{\ttfamily [get]}, {\ttfamily [set]}}}\label{a00090_ac5661051e0b7f44527fe526c7766dbbf}


Definition at line 432 of file Dialogue.\-cs.



The documentation for this class was generated from the following file\-:\begin{DoxyCompactItemize}
\item 
Yarn\-Spinner/\hyperlink{a00285}{Dialogue.\-cs}\end{DoxyCompactItemize}
