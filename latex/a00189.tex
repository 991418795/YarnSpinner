\hypertarget{a00189}{\section{Yarn.\-Yarn\-Spinner\-Console Class Reference}
\label{a00189}\index{Yarn.\-Yarn\-Spinner\-Console@{Yarn.\-Yarn\-Spinner\-Console}}
}


Collaboration diagram for Yarn.\-Yarn\-Spinner\-Console\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=226pt]{a00744}
\end{center}
\end{figure}
\subsection*{Classes}
\begin{DoxyCompactItemize}
\item 
class \hyperlink{a00050}{Console\-Runner\-Implementation}
\end{DoxyCompactItemize}
\subsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
static void \hyperlink{a00189_a2f63f9f5b7634cb50ee75ff2eb18b137}{Error} (params string\mbox{[}$\,$\mbox{]} messages)
\item 
static void \hyperlink{a00189_a939cc9e943c574b36c6af93e9c772702}{Note} (params string\mbox{[}$\,$\mbox{]} messages)
\item 
static void \hyperlink{a00189_a979bb6f049b6c5294f745a19e24ddd9d}{Warn} (params string\mbox{[}$\,$\mbox{]} messages)
\item 
static void \hyperlink{a00189_a1d71ff2eb190449ea1d42ce86f44489f}{Main} (string\mbox{[}$\,$\mbox{]} args)
\end{DoxyCompactItemize}
\subsection*{Static Package Functions}
\begin{DoxyCompactItemize}
\item 
static \hyperlink{a00086}{Dialogue} \hyperlink{a00189_aff69d6e16dddb077f87a616a57cd3c66}{Create\-Dialogue\-For\-Utilities} ()
\item 
static void \hyperlink{a00189_ad77564b25725a771f0fd4da430582e6f}{Check\-File\-List} (I\-List$<$ string $>$ paths, List$<$ string $>$ allowed\-Extensions)
\item 
static \hyperlink{a00086}{Dialogue} \hyperlink{a00189_aab244361a510cee18ad2f636d110e0d5}{Create\-Dialogue} (\hyperlink{a00097}{Execution\-Options} options, \hyperlink{a00050}{Console\-Runner\-Implementation} impl)
\end{DoxyCompactItemize}
\subsection*{Static Package Attributes}
\begin{DoxyCompactItemize}
\item 
static List$<$ string $>$ \hyperlink{a00189_a0979de7ea02c8c0375b8220a12e6575e}{A\-L\-L\-O\-W\-E\-D\-\_\-\-E\-X\-T\-E\-N\-S\-I\-O\-N\-S} = new List$<$string$>$(new string\mbox{[}$\,$\mbox{]} \{ \char`\"{}.json\char`\"{}, \char`\"{}.node\char`\"{}, \char`\"{}.yarn.\-bytes\char`\"{}, \char`\"{}.yarn.\-txt\char`\"{} \})
\end{DoxyCompactItemize}
\subsection*{Static Private Member Functions}
\begin{DoxyCompactItemize}
\item 
static int \hyperlink{a00189_a1b974c55540795a9e643c2ec055fbd51}{Run} (\hyperlink{a00151}{Run\-Options} options)
\item 
static int \hyperlink{a00189_a029a5624e7cc3a16ae586b64f13049de}{Verify} (\hyperlink{a00186}{Verify\-Options} options)
\end{DoxyCompactItemize}


\subsection{Detailed Description}


Definition at line 139 of file Main.\-cs.



\subsection{Member Function Documentation}
\hypertarget{a00189_ad77564b25725a771f0fd4da430582e6f}{\index{Yarn\-::\-Yarn\-Spinner\-Console@{Yarn\-::\-Yarn\-Spinner\-Console}!Check\-File\-List@{Check\-File\-List}}
\index{Check\-File\-List@{Check\-File\-List}!Yarn::YarnSpinnerConsole@{Yarn\-::\-Yarn\-Spinner\-Console}}
\subsubsection[{Check\-File\-List}]{\setlength{\rightskip}{0pt plus 5cm}static void Yarn.\-Yarn\-Spinner\-Console.\-Check\-File\-List (
\begin{DoxyParamCaption}
\item[{I\-List$<$ string $>$}]{paths, }
\item[{List$<$ string $>$}]{allowed\-Extensions}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}, {\ttfamily [package]}}}\label{a00189_ad77564b25725a771f0fd4da430582e6f}


Definition at line 203 of file Main.\-cs.



References Yarn.\-Yarn\-Spinner\-Console.\-Error(), and Yarn.\-Yarn\-Spinner\-Console.\-Warn().



Referenced by Yarn.\-Yarn\-Spinner\-Console.\-Run(), and Yarn.\-Yarn\-Spinner\-Console.\-Verify().


\begin{DoxyCode}
204         \{
205 
206             \textcolor{keywordflow}{if} (paths.Count == 0)
207             \{
208                 \hyperlink{a00189_a979bb6f049b6c5294f745a19e24ddd9d}{Warn}(\textcolor{stringliteral}{"No files provided."});
209                 \textcolor{keywordflow}{return};
210             \}
211 
212             var invalid = \textcolor{keyword}{new} List<string>();
213 
214             \textcolor{keywordflow}{foreach} (var path \textcolor{keywordflow}{in} paths)
215             \{
216                 \textcolor{comment}{// Does this file exist?}
217                 var exists = System.IO.File.Exists(path);
218 
219                 \textcolor{comment}{// Does this file have the right extension?}
220 
221                 var hasAllowedExtension = allowedExtensions.FindIndex(item => path.EndsWith(item)) != -1;
222 
223                 \textcolor{keywordflow}{if} (!exists || !hasAllowedExtension)
224                 \{
225                     invalid.Add(string.Format(\textcolor{stringliteral}{"\(\backslash\)"\{0\}\(\backslash\)""}, path));
226                 \}
227             \}
228 
229             \textcolor{keywordflow}{if} (invalid.Count != 0)
230             \{
231 
232                 var message = string.Format(\textcolor{stringliteral}{"The file\{0\} \{1\} \{2\}."},
233                     invalid.Count == 1 ? \textcolor{stringliteral}{""} : \textcolor{stringliteral}{"s"},
234                                             string.Join(\textcolor{stringliteral}{", "}, invalid.ToArray()),
235                     invalid.Count == 1 ? \textcolor{stringliteral}{"is not valid"} : \textcolor{stringliteral}{"are not valid"}
236                 );
237 
238                 \hyperlink{a00189_a2f63f9f5b7634cb50ee75ff2eb18b137}{Error}(message);
239             \}
240         \}
\end{DoxyCode}


Here is the call graph for this function\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{a00189_ad77564b25725a771f0fd4da430582e6f_cgraph}
\end{center}
\end{figure}




Here is the caller graph for this function\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{a00189_ad77564b25725a771f0fd4da430582e6f_icgraph}
\end{center}
\end{figure}


\hypertarget{a00189_aab244361a510cee18ad2f636d110e0d5}{\index{Yarn\-::\-Yarn\-Spinner\-Console@{Yarn\-::\-Yarn\-Spinner\-Console}!Create\-Dialogue@{Create\-Dialogue}}
\index{Create\-Dialogue@{Create\-Dialogue}!Yarn::YarnSpinnerConsole@{Yarn\-::\-Yarn\-Spinner\-Console}}
\subsubsection[{Create\-Dialogue}]{\setlength{\rightskip}{0pt plus 5cm}static {\bf Dialogue} Yarn.\-Yarn\-Spinner\-Console.\-Create\-Dialogue (
\begin{DoxyParamCaption}
\item[{{\bf Execution\-Options}}]{options, }
\item[{{\bf Console\-Runner\-Implementation}}]{impl}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}, {\ttfamily [package]}}}\label{a00189_aab244361a510cee18ad2f636d110e0d5}


Definition at line 383 of file Main.\-cs.



References Yarn.\-Value.\-As\-Bool, Yarn.\-Yarn\-Spinner\-Console.\-Error(), Yarn.\-Execution\-Options.\-experimental, Yarn.\-Yarn\-Spinner\-Console.\-Note(), Yarn.\-Base\-Options.\-show\-Debugging\-Info, and Yarn.\-Yarn\-Spinner\-Console.\-Warn().



Referenced by Yarn.\-Yarn\-Spinner\-Console.\-Run(), and Yarn.\-Yarn\-Spinner\-Console.\-Verify().


\begin{DoxyCode}
384         \{
385 
386             \textcolor{comment}{// Load nodes}
387             var dialogue = \textcolor{keyword}{new} Dialogue(impl);
388 
389             \textcolor{keywordflow}{if} (options.experimental)
390             \{
391                 \hyperlink{a00189_a979bb6f049b6c5294f745a19e24ddd9d}{Warn}(\textcolor{stringliteral}{"Running YarnSpinner in experimental mode may have unexpected behaviour."});
392                 dialogue.experimentalMode = \textcolor{keyword}{true};
393             \}
394 
395             \textcolor{comment}{// Add some methods for testing}
396             dialogue.library.RegisterFunction(\textcolor{stringliteral}{"add\_three\_operands"}, 3, delegate (Value[] parameters)
397             \{
398                 \textcolor{keywordflow}{return} parameters[0] + parameters[1] + parameters[2];
399             \});
400 
401             dialogue.library.RegisterFunction(\textcolor{stringliteral}{"last\_value"}, -1, delegate (Value[] parameters)
402             \{
403                 \textcolor{comment}{// return the last value}
404                 \textcolor{keywordflow}{return} parameters[parameters.Length - 1];
405             \});
406 
407             dialogue.library.RegisterFunction(\textcolor{stringliteral}{"is\_even"}, 1, delegate (Value[] parameters)
408             \{
409                 \textcolor{keywordflow}{return} (\textcolor{keywordtype}{int})parameters[0].AsNumber % 2 == 0;
410             \});
411 
412             \textcolor{comment}{// Register the "assert" function, which stops execution if its parameter evaluates to false}
413             dialogue.library.RegisterFunction(\textcolor{stringliteral}{"assert"}, -1, delegate (Value[] parameters)
414             \{
415                 \textcolor{keywordflow}{if} (parameters[0].AsBool == \textcolor{keyword}{false})
416                 \{
417 
418                     \textcolor{comment}{// TODO: Include file, node and line number}
419                     \textcolor{keywordflow}{if} (parameters.Length > 1 && parameters[1].AsBool)
420                     \{
421                         dialogue.LogErrorMessage(\textcolor{stringliteral}{"ASSERTION FAILED: "} + parameters[1].AsString);
422                     \}
423                     \textcolor{keywordflow}{else} \{
424                         dialogue.LogErrorMessage(\textcolor{stringliteral}{"ASSERTION FAILED"});
425                     \}
426                     Environment.Exit(1);
427                 \}
428             \});
429 
430 
431             \textcolor{comment}{// Register a function to let test scripts register how many}
432             \textcolor{comment}{// options they expect to send}
433             dialogue.library.RegisterFunction(\textcolor{stringliteral}{"prepare\_for\_options"}, 2, delegate (Value[] parameters)
434             \{
435                 impl.numberOfExpectedOptions = (int)parameters[0].AsNumber;
436                 impl.autoSelectOptionNumber = (int)parameters[1].AsNumber;
437             \});
438 
439             dialogue.library.RegisterFunction(\textcolor{stringliteral}{"expect\_line"}, 1, delegate (Value[] parameters)
440             \{
441                 impl.expectedNextLine = parameters[0].AsString;
442             \});
443 
444             dialogue.library.RegisterFunction(\textcolor{stringliteral}{"expect\_command"}, 1, delegate (Value[] parameters)
445             \{
446                 impl.expectedNextCommand = parameters[0].AsString;
447             \});
448 
449             \textcolor{comment}{// If debugging is enabled, log debug messages; otherwise, ignore them}
450             \textcolor{keywordflow}{if} (options.showDebuggingInfo)
451             \{
452                 dialogue.LogDebugMessage = delegate (\textcolor{keywordtype}{string} message)
453                 \{
454                     \hyperlink{a00189_a939cc9e943c574b36c6af93e9c772702}{Note}(message);
455                 \};
456             \}
457             \textcolor{keywordflow}{else} \{
458                 dialogue.LogDebugMessage = delegate (\textcolor{keywordtype}{string} message) \{ \};
459             \}
460 
461             dialogue.LogErrorMessage = delegate (\textcolor{keywordtype}{string} message)
462             \{
463                 \hyperlink{a00189_a979bb6f049b6c5294f745a19e24ddd9d}{Warn}(\textcolor{stringliteral}{"Yarn Error: "} + message);
464             \};
465 
466             \textcolor{keywordflow}{foreach} (var file \textcolor{keywordflow}{in} options.files) \{
467                 \textcolor{keywordflow}{try} \{
468                     dialogue.LoadFile(file, \textcolor{keyword}{false}, \textcolor{keyword}{false}, options.onlyConsiderNode);
469                 \} \textcolor{keywordflow}{catch} (Yarn.TokeniserException e) \{
470                     \hyperlink{a00189_a979bb6f049b6c5294f745a19e24ddd9d}{Warn}(e.Message);
471                 \} \textcolor{keywordflow}{catch} (Yarn.ParseException e) \{
472                     \hyperlink{a00189_a979bb6f049b6c5294f745a19e24ddd9d}{Warn}(e.Message);
473                 \}
474 
475             \}
476 
477             \textcolor{comment}{// Load string table}
478             \textcolor{keywordflow}{if} (options.stringTable != null)
479             \{
480 
481                 var parsedTable = \textcolor{keyword}{new} Dictionary<string, string>();
482 
483                 \textcolor{keyword}{using} (var reader = \textcolor{keyword}{new} System.IO.StreamReader(options.stringTable))
484                 \{
485                     \textcolor{keyword}{using} (var csvReader = \textcolor{keyword}{new} \hyperlink{a00071}{CsvReader}(reader))
486                     \{
487                         \textcolor{keywordflow}{if} (csvReader.ReadHeader() == \textcolor{keyword}{false})
488                         \{
489                             \hyperlink{a00189_a2f63f9f5b7634cb50ee75ff2eb18b137}{Error}(\textcolor{keywordtype}{string}.Format(\textcolor{stringliteral}{"\{0\} is not a valid string table"}, options.stringTable
      ));
490                         \}
491 
492                         \textcolor{keywordflow}{foreach} (var row \textcolor{keywordflow}{in} csvReader.GetRecords<LocalisedLine>())
493                         \{
494                             parsedTable[row.LineCode] = row.LineText;
495                         \}
496                     \}
497                 \}
498 
499                 dialogue.AddStringTable(parsedTable);
500             \}
501 
502             \textcolor{keywordflow}{return} dialogue;
503         \}
\end{DoxyCode}


Here is the call graph for this function\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{a00189_aab244361a510cee18ad2f636d110e0d5_cgraph}
\end{center}
\end{figure}




Here is the caller graph for this function\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{a00189_aab244361a510cee18ad2f636d110e0d5_icgraph}
\end{center}
\end{figure}


\hypertarget{a00189_aff69d6e16dddb077f87a616a57cd3c66}{\index{Yarn\-::\-Yarn\-Spinner\-Console@{Yarn\-::\-Yarn\-Spinner\-Console}!Create\-Dialogue\-For\-Utilities@{Create\-Dialogue\-For\-Utilities}}
\index{Create\-Dialogue\-For\-Utilities@{Create\-Dialogue\-For\-Utilities}!Yarn::YarnSpinnerConsole@{Yarn\-::\-Yarn\-Spinner\-Console}}
\subsubsection[{Create\-Dialogue\-For\-Utilities}]{\setlength{\rightskip}{0pt plus 5cm}static {\bf Dialogue} Yarn.\-Yarn\-Spinner\-Console.\-Create\-Dialogue\-For\-Utilities (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}, {\ttfamily [package]}}}\label{a00189_aff69d6e16dddb077f87a616a57cd3c66}


Definition at line 142 of file Main.\-cs.


\begin{DoxyCode}
143         \{
144 
145             \textcolor{comment}{// Note that we're passing in with a null library - this means}
146             \textcolor{comment}{// that all function checking will be disabled, and missing funcs}
147             \textcolor{comment}{// will not cause a compile error. If a func IS missing at runtime,}
148             \textcolor{comment}{// THAT will throw an exception.}
149 
150             \textcolor{comment}{// We do this because this tool has no idea about any of the custom}
151             \textcolor{comment}{// functions that you might be using.}
152 
153             Dialogue d = \textcolor{keyword}{new} Dialogue(null);
154 
155             \textcolor{comment}{// Debug logging goes to Note}
156             d.LogDebugMessage = message => YarnSpinnerConsole.Note(message);
157 
158             \textcolor{comment}{// When erroring, call Warn, not Error, which terminates the program}
159             d.LogErrorMessage = message => YarnSpinnerConsole.Warn(message);
160 
161             \textcolor{keywordflow}{return} d;
162         \}
\end{DoxyCode}
\hypertarget{a00189_a2f63f9f5b7634cb50ee75ff2eb18b137}{\index{Yarn\-::\-Yarn\-Spinner\-Console@{Yarn\-::\-Yarn\-Spinner\-Console}!Error@{Error}}
\index{Error@{Error}!Yarn::YarnSpinnerConsole@{Yarn\-::\-Yarn\-Spinner\-Console}}
\subsubsection[{Error}]{\setlength{\rightskip}{0pt plus 5cm}static void Yarn.\-Yarn\-Spinner\-Console.\-Error (
\begin{DoxyParamCaption}
\item[{params string\mbox{[}$\,$\mbox{]}}]{messages}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{a00189_a2f63f9f5b7634cb50ee75ff2eb18b137}


Definition at line 164 of file Main.\-cs.



Referenced by Yarn.\-Yarn\-Spinner\-Console.\-Check\-File\-List(), Yarn.\-Yarn\-Spinner\-Console.\-Create\-Dialogue(), Yarn.\-Yarn\-Spinner\-Console.\-Console\-Runner\-Implementation.\-Handle\-Error\-Message(), Yarn.\-Yarn\-Spinner\-Console.\-Console\-Runner\-Implementation.\-Run\-Command(), Yarn.\-Yarn\-Spinner\-Console.\-Console\-Runner\-Implementation.\-Run\-Line(), Yarn.\-Yarn\-Spinner\-Console.\-Console\-Runner\-Implementation.\-Run\-Options(), and Yarn.\-Yarn\-Spinner\-Console.\-Verify().


\begin{DoxyCode}
165         \{
166 
167             \textcolor{keywordflow}{foreach} (var message \textcolor{keywordflow}{in} messages)
168             \{
169                 Console.ForegroundColor = ConsoleColor.DarkRed;
170                 Console.Write(\textcolor{stringliteral}{"Error: "});
171                 Console.ResetColor();
172                 Console.WriteLine(message);
173             \}
174 
175             Environment.Exit(1);
176         \}
\end{DoxyCode}


Here is the caller graph for this function\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{a00189_a2f63f9f5b7634cb50ee75ff2eb18b137_icgraph}
\end{center}
\end{figure}


\hypertarget{a00189_a1d71ff2eb190449ea1d42ce86f44489f}{\index{Yarn\-::\-Yarn\-Spinner\-Console@{Yarn\-::\-Yarn\-Spinner\-Console}!Main@{Main}}
\index{Main@{Main}!Yarn::YarnSpinnerConsole@{Yarn\-::\-Yarn\-Spinner\-Console}}
\subsubsection[{Main}]{\setlength{\rightskip}{0pt plus 5cm}static void Yarn.\-Yarn\-Spinner\-Console.\-Main (
\begin{DoxyParamCaption}
\item[{string\mbox{[}$\,$\mbox{]}}]{args}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{a00189_a1d71ff2eb190449ea1d42ce86f44489f}


Definition at line 241 of file Main.\-cs.



References Yarn.\-Line\-Adder.\-Add\-Lines(), Yarn.\-File\-Format\-Converter.\-Convert\-Format(), Yarn.\-Program\-Exporter.\-Export(), Yarn.\-Table\-Generator.\-Generate\-Tables(), Yarn.\-Yarn\-Spinner\-Console.\-Run(), and Yarn.\-Yarn\-Spinner\-Console.\-Verify().


\begin{DoxyCode}
242         \{
243 
244             \textcolor{comment}{// Read and dispatch the appropriate command}
245             var results = CommandLine.Parser.Default.ParseArguments
246             <
247             RunOptions,
248             VerifyOptions,
249             CompileOptions,
250             GenerateTableOptions,
251             AddLabelsOptions,
252             ConvertFormatOptions
253             >(args);
254 
255             var returnCode = results.MapResult(
256                 (RunOptions options) => \hyperlink{a00189_a1b974c55540795a9e643c2ec055fbd51}{Run}(options),
257                 (VerifyOptions options) => \hyperlink{a00189_a029a5624e7cc3a16ae586b64f13049de}{Verify}(options),
258                 (CompileOptions options) => ProgramExporter.Export(options),
259                 (AddLabelsOptions options) => LineAdder.AddLines(options),
260                 (GenerateTableOptions options) => TableGenerator.GenerateTables(options),
261                 (ConvertFormatOptions options) => FileFormatConverter.ConvertFormat(options),
262 
263                 errors => \{ \textcolor{keywordflow}{return} 1; \});
264 
265             Environment.Exit(returnCode);
266 
267 
268         \}
\end{DoxyCode}


Here is the call graph for this function\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{a00189_a1d71ff2eb190449ea1d42ce86f44489f_cgraph}
\end{center}
\end{figure}


\hypertarget{a00189_a939cc9e943c574b36c6af93e9c772702}{\index{Yarn\-::\-Yarn\-Spinner\-Console@{Yarn\-::\-Yarn\-Spinner\-Console}!Note@{Note}}
\index{Note@{Note}!Yarn::YarnSpinnerConsole@{Yarn\-::\-Yarn\-Spinner\-Console}}
\subsubsection[{Note}]{\setlength{\rightskip}{0pt plus 5cm}static void Yarn.\-Yarn\-Spinner\-Console.\-Note (
\begin{DoxyParamCaption}
\item[{params string\mbox{[}$\,$\mbox{]}}]{messages}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{a00189_a939cc9e943c574b36c6af93e9c772702}


Definition at line 178 of file Main.\-cs.



Referenced by Yarn.\-Yarn\-Spinner\-Console.\-Create\-Dialogue(), Yarn.\-Yarn\-Spinner\-Console.\-Console\-Runner\-Implementation.\-Handle\-Debug\-Message(), Yarn.\-Yarn\-Spinner\-Console.\-Console\-Runner\-Implementation.\-Run\-Options(), and Yarn.\-Yarn\-Spinner\-Console.\-Verify().


\begin{DoxyCode}
179         \{
180 
181             \textcolor{keywordflow}{foreach} (var message \textcolor{keywordflow}{in} messages)
182             \{
183                 Console.ForegroundColor = ConsoleColor.DarkBlue;
184                 Console.Write(\textcolor{stringliteral}{"Note: "});
185                 Console.ResetColor();
186                 Console.WriteLine(message);
187             \}
188 
189 
190         \}
\end{DoxyCode}


Here is the caller graph for this function\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{a00189_a939cc9e943c574b36c6af93e9c772702_icgraph}
\end{center}
\end{figure}


\hypertarget{a00189_a1b974c55540795a9e643c2ec055fbd51}{\index{Yarn\-::\-Yarn\-Spinner\-Console@{Yarn\-::\-Yarn\-Spinner\-Console}!Run@{Run}}
\index{Run@{Run}!Yarn::YarnSpinnerConsole@{Yarn\-::\-Yarn\-Spinner\-Console}}
\subsubsection[{Run}]{\setlength{\rightskip}{0pt plus 5cm}static int Yarn.\-Yarn\-Spinner\-Console.\-Run (
\begin{DoxyParamCaption}
\item[{{\bf Run\-Options}}]{options}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}, {\ttfamily [private]}}}\label{a00189_a1b974c55540795a9e643c2ec055fbd51}


Definition at line 272 of file Main.\-cs.



References Yarn.\-Yarn\-Spinner\-Console.\-A\-L\-L\-O\-W\-E\-D\-\_\-\-E\-X\-T\-E\-N\-S\-I\-O\-N\-S, Yarn.\-Yarn\-Spinner\-Console.\-Check\-File\-List(), Yarn.\-Yarn\-Spinner\-Console.\-Create\-Dialogue(), Yarn.\-Base\-Options.\-files, Yarn.\-Dialogue.\-Run(), Yarn.\-Run\-Options.\-wait\-For\-Input, and Yarn.\-Yarn\-Spinner\-Console.\-Warn().



Referenced by Yarn.\-Yarn\-Spinner\-Console.\-Main().


\begin{DoxyCode}
273         \{
274 
275             \hyperlink{a00189_ad77564b25725a771f0fd4da430582e6f}{CheckFileList}(options.files, \hyperlink{a00189_a0979de7ea02c8c0375b8220a12e6575e}{ALLOWED\_EXTENSIONS});
276 
277             \textcolor{comment}{// Create the object that handles callbacks}
278             var impl = \textcolor{keyword}{new} ConsoleRunnerImplementation(waitForLines: options.waitForInput);
279 
280             \textcolor{comment}{// load the default variables we got on the command line}
281             \textcolor{keywordflow}{foreach} (var variable \textcolor{keywordflow}{in} options.variables)
282             \{
283                 var entry = variable.Split(\textcolor{keyword}{new} \textcolor{keywordtype}{char}[] \{ \textcolor{charliteral}{'='} \}, StringSplitOptions.RemoveEmptyEntries);
284 
285                 \textcolor{keywordtype}{float} value;
286                 \textcolor{comment}{// If there aren't two parts to this or the second part isn't a float, fail}
287                 \textcolor{keywordflow}{if} (entry.Length != 2 || \textcolor{keywordtype}{float}.TryParse(entry[1], out value) == \textcolor{keyword}{false})
288                 \{
289                     \hyperlink{a00189_a979bb6f049b6c5294f745a19e24ddd9d}{Warn}(\textcolor{keywordtype}{string}.Format(\textcolor{stringliteral}{"Skipping invalid variable \{0\}"}, variable));
290                     \textcolor{keywordflow}{continue};
291                 \}
292                 var name = entry[0];
293 
294                 impl.SetNumber(name, value);
295             \}
296 
297             \textcolor{keywordflow}{if} (options.automaticallySelectFirstOption == \textcolor{keyword}{true})
298             \{
299                 impl.autoSelectFirstOption = \textcolor{keyword}{true};
300             \}
301 
302             Dialogue dialogue = \hyperlink{a00189_aab244361a510cee18ad2f636d110e0d5}{CreateDialogue}(options, impl);
303 
304             \textcolor{comment}{// Run the conversation}
305 
306             \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} run = 0; run < options.runTimes; run++)
307             \{
308                 \textcolor{keywordflow}{foreach} (var step \textcolor{keywordflow}{in} dialogue.Run(options.startNode))
309                 \{
310 
311                     \textcolor{comment}{// It can be one of three types: a line to show, options}
312                     \textcolor{comment}{// to present to the user, or an internal command to run}
313 
314                     \textcolor{keywordflow}{if} (step is Dialogue.LineResult)
315                     \{
316                         var lineResult = step as Dialogue.LineResult;
317                         impl.RunLine(lineResult.line);
318                     \}
319                     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (step is Dialogue.OptionSetResult)
320                     \{
321                         var optionsResult = step as Dialogue.OptionSetResult;
322                         impl.RunOptions(optionsResult.options, optionsResult.setSelectedOptionDelegate);
323                     \}
324                     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (step is Dialogue.CommandResult)
325                     \{
326                         var commandResult = step as Dialogue.CommandResult;
327                         impl.RunCommand(commandResult.command.text);
328                     \}
329                 \}
330                 impl.DialogueComplete();
331             \}
332             \textcolor{keywordflow}{return} 0;
333         \}
\end{DoxyCode}


Here is the call graph for this function\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{a00189_a1b974c55540795a9e643c2ec055fbd51_cgraph}
\end{center}
\end{figure}




Here is the caller graph for this function\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{a00189_a1b974c55540795a9e643c2ec055fbd51_icgraph}
\end{center}
\end{figure}


\hypertarget{a00189_a029a5624e7cc3a16ae586b64f13049de}{\index{Yarn\-::\-Yarn\-Spinner\-Console@{Yarn\-::\-Yarn\-Spinner\-Console}!Verify@{Verify}}
\index{Verify@{Verify}!Yarn::YarnSpinnerConsole@{Yarn\-::\-Yarn\-Spinner\-Console}}
\subsubsection[{Verify}]{\setlength{\rightskip}{0pt plus 5cm}static int Yarn.\-Yarn\-Spinner\-Console.\-Verify (
\begin{DoxyParamCaption}
\item[{{\bf Verify\-Options}}]{options}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}, {\ttfamily [private]}}}\label{a00189_a029a5624e7cc3a16ae586b64f13049de}


Definition at line 335 of file Main.\-cs.



References Yarn.\-Yarn\-Spinner\-Console.\-A\-L\-L\-O\-W\-E\-D\-\_\-\-E\-X\-T\-E\-N\-S\-I\-O\-N\-S, Yarn.\-Yarn\-Spinner\-Console.\-Check\-File\-List(), Yarn.\-Verify\-Options.\-compile\-And\-Exit, Yarn.\-Yarn\-Spinner\-Console.\-Create\-Dialogue(), Yarn.\-Yarn\-Spinner\-Console.\-Error(), Yarn.\-Base\-Options.\-files, Yarn.\-Yarn\-Spinner\-Console.\-Note(), and Yarn.\-Yarn\-Spinner\-Console.\-Warn().



Referenced by Yarn.\-Yarn\-Spinner\-Console.\-Main().


\begin{DoxyCode}
336         \{
337 
338             \hyperlink{a00189_ad77564b25725a771f0fd4da430582e6f}{CheckFileList}(options.files, \hyperlink{a00189_a0979de7ea02c8c0375b8220a12e6575e}{ALLOWED\_EXTENSIONS});
339 
340             Dialogue dialogue;
341             \textcolor{keywordflow}{try}
342             \{
343                 dialogue = \hyperlink{a00189_aab244361a510cee18ad2f636d110e0d5}{CreateDialogue}(options, null);
344             \}
345             \textcolor{keywordflow}{catch}
346             \{
347                 \textcolor{keywordflow}{return} 1;
348             \}
349 
350             \textcolor{keywordflow}{if} (options.compileAndExit)
351             \{
352                 var result = dialogue.GetByteCode();
353                 Console.WriteLine(result);
354                 \textcolor{keywordflow}{return} 0;
355             \}
356 
357             var context = \textcolor{keyword}{new} \hyperlink{a00051}{Yarn.Analysis.Context}();
358 
359             dialogue.Analyse(context);
360 
361             \textcolor{keywordflow}{foreach} (var diagnosis \textcolor{keywordflow}{in} context.FinishAnalysis())
362             \{
363                 \textcolor{keywordflow}{switch} (diagnosis.severity)
364                 \{
365                     \textcolor{keywordflow}{case} Analysis.Diagnosis.Severity.Error:
366                         \hyperlink{a00189_a2f63f9f5b7634cb50ee75ff2eb18b137}{Error}(diagnosis.ToString(showSeverity: \textcolor{keyword}{false}));
367                         \textcolor{keywordflow}{break};
368                     \textcolor{keywordflow}{case} Analysis.Diagnosis.Severity.Warning:
369                         \hyperlink{a00189_a979bb6f049b6c5294f745a19e24ddd9d}{Warn}(diagnosis.ToString(showSeverity: \textcolor{keyword}{false}));
370                         \textcolor{keywordflow}{break};
371                     \textcolor{keywordflow}{case} Analysis.Diagnosis.Severity.Note:
372                         \hyperlink{a00189_a939cc9e943c574b36c6af93e9c772702}{Note}(diagnosis.ToString(showSeverity: \textcolor{keyword}{false}));
373                         \textcolor{keywordflow}{break};
374                     \textcolor{keywordflow}{default}:
375                         \textcolor{keywordflow}{throw} \textcolor{keyword}{new} ArgumentOutOfRangeException();
376                 \}
377 
378             \}
379             \textcolor{keywordflow}{return} 0;
380 
381         \}
\end{DoxyCode}


Here is the call graph for this function\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{a00189_a029a5624e7cc3a16ae586b64f13049de_cgraph}
\end{center}
\end{figure}




Here is the caller graph for this function\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{a00189_a029a5624e7cc3a16ae586b64f13049de_icgraph}
\end{center}
\end{figure}


\hypertarget{a00189_a979bb6f049b6c5294f745a19e24ddd9d}{\index{Yarn\-::\-Yarn\-Spinner\-Console@{Yarn\-::\-Yarn\-Spinner\-Console}!Warn@{Warn}}
\index{Warn@{Warn}!Yarn::YarnSpinnerConsole@{Yarn\-::\-Yarn\-Spinner\-Console}}
\subsubsection[{Warn}]{\setlength{\rightskip}{0pt plus 5cm}static void Yarn.\-Yarn\-Spinner\-Console.\-Warn (
\begin{DoxyParamCaption}
\item[{params string\mbox{[}$\,$\mbox{]}}]{messages}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{a00189_a979bb6f049b6c5294f745a19e24ddd9d}


Definition at line 192 of file Main.\-cs.



Referenced by Yarn.\-Yarn\-Spinner\-Console.\-Check\-File\-List(), Yarn.\-Yarn\-Spinner\-Console.\-Create\-Dialogue(), Yarn.\-Yarn\-Spinner\-Console.\-Run(), and Yarn.\-Yarn\-Spinner\-Console.\-Verify().


\begin{DoxyCode}
193         \{
194             \textcolor{keywordflow}{foreach} (var message \textcolor{keywordflow}{in} messages)
195             \{
196                 Console.ForegroundColor = ConsoleColor.DarkYellow;
197                 Console.Write(\textcolor{stringliteral}{"Warning: "});
198                 Console.ResetColor();
199                 Console.WriteLine(message);
200             \}
201         \}
\end{DoxyCode}


Here is the caller graph for this function\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{a00189_a979bb6f049b6c5294f745a19e24ddd9d_icgraph}
\end{center}
\end{figure}




\subsection{Member Data Documentation}
\hypertarget{a00189_a0979de7ea02c8c0375b8220a12e6575e}{\index{Yarn\-::\-Yarn\-Spinner\-Console@{Yarn\-::\-Yarn\-Spinner\-Console}!A\-L\-L\-O\-W\-E\-D\-\_\-\-E\-X\-T\-E\-N\-S\-I\-O\-N\-S@{A\-L\-L\-O\-W\-E\-D\-\_\-\-E\-X\-T\-E\-N\-S\-I\-O\-N\-S}}
\index{A\-L\-L\-O\-W\-E\-D\-\_\-\-E\-X\-T\-E\-N\-S\-I\-O\-N\-S@{A\-L\-L\-O\-W\-E\-D\-\_\-\-E\-X\-T\-E\-N\-S\-I\-O\-N\-S}!Yarn::YarnSpinnerConsole@{Yarn\-::\-Yarn\-Spinner\-Console}}
\subsubsection[{A\-L\-L\-O\-W\-E\-D\-\_\-\-E\-X\-T\-E\-N\-S\-I\-O\-N\-S}]{\setlength{\rightskip}{0pt plus 5cm}List$<$string$>$ Yarn.\-Yarn\-Spinner\-Console.\-A\-L\-L\-O\-W\-E\-D\-\_\-\-E\-X\-T\-E\-N\-S\-I\-O\-N\-S = new List$<$string$>$(new string\mbox{[}$\,$\mbox{]} \{ \char`\"{}.json\char`\"{}, \char`\"{}.node\char`\"{}, \char`\"{}.yarn.\-bytes\char`\"{}, \char`\"{}.yarn.\-txt\char`\"{} \})\hspace{0.3cm}{\ttfamily [static]}, {\ttfamily [package]}}}\label{a00189_a0979de7ea02c8c0375b8220a12e6575e}


Definition at line 270 of file Main.\-cs.



Referenced by Yarn.\-Line\-Adder.\-Add\-Lines(), Yarn.\-File\-Format\-Converter.\-Convert\-Format(), Yarn.\-Program\-Exporter.\-Export(), Yarn.\-Table\-Generator.\-Generate\-Tables(), Yarn.\-Yarn\-Spinner\-Console.\-Run(), and Yarn.\-Yarn\-Spinner\-Console.\-Verify().



The documentation for this class was generated from the following file\-:\begin{DoxyCompactItemize}
\item 
Yarn\-Spinner\-Console/\hyperlink{a00313}{Main.\-cs}\end{DoxyCompactItemize}
