\hypertarget{a00126}{\section{Yarn.\-Program Class Reference}
\label{a00126}\index{Yarn.\-Program@{Yarn.\-Program}}
}


Collaboration diagram for Yarn.\-Program\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=184pt]{d0/de7/a00523}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{a00126_a977d1ed02e3f6f39d30dfea1663e7927}{Load\-Strings} (Dictionary$<$ string, string $>$ new\-Strings)
\item 
string \hyperlink{a00126_a9baf491479375aa8c3aa2b0c31cf0932}{Register\-String} (string the\-String, string node\-Name, string line\-I\-D, int line\-Number, bool localisable)
\item 
string \hyperlink{a00126_a14737b93594c4aab25c59cb0a3c918f7}{Get\-String} (string key)
\item 
string \hyperlink{a00126_a2f5bb468ce53eb7bbe647e3c11ddbb61}{Dump\-Code} (\hyperlink{a00103}{Library} l)
\item 
string \hyperlink{a00126_aad8029f37832ff1985fad6a31e51afd8}{Get\-Text\-For\-Node} (string node\-Name)
\item 
void \hyperlink{a00126_afd3385ca1f7589b3b9dae3646e4fee84}{Include} (\hyperlink{a00126}{Program} other\-Program)
\end{DoxyCompactItemize}
\subsection*{Package Attributes}
\begin{DoxyCompactItemize}
\item 
Dictionary$<$ string, string $>$ \hyperlink{a00126_a91518fda7e41bf573f66c6946dd3b4cb}{strings} = new Dictionary$<$string, string$>$ ()
\item 
Dictionary$<$ string, \hyperlink{a00105}{Line\-Info} $>$ \hyperlink{a00126_a0d4da395947767b4a1eaaff8a9842adc}{line\-Info} = new Dictionary$<$string, \hyperlink{a00105}{Line\-Info}$>$()
\item 
Dictionary$<$ string, \hyperlink{a00031_dd/de2/a00320}{Node} $>$ \hyperlink{a00126_a3f4928a577c88263ad016be259b175c4}{nodes} = new Dictionary$<$string, \hyperlink{a00031_dd/de2/a00320}{Node}$>$()
\end{DoxyCompactItemize}
\subsection*{Properties}
\begin{DoxyCompactItemize}
\item 
Dictionary$<$ string, string $>$ \hyperlink{a00126_aa8fedbfceaf931d1da3f600eaab6ae87}{untagged\-Strings}\hspace{0.3cm}{\ttfamily  \mbox{[}get\mbox{]}}
\end{DoxyCompactItemize}
\subsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
int \hyperlink{a00126_a8ef1d10094ef00311aade6715ba78ec7}{string\-Count} = 0
\end{DoxyCompactItemize}


\subsection{Detailed Description}


\subsection{Member Function Documentation}
\hypertarget{a00126_a2f5bb468ce53eb7bbe647e3c11ddbb61}{\index{Yarn\-::\-Program@{Yarn\-::\-Program}!Dump\-Code@{Dump\-Code}}
\index{Dump\-Code@{Dump\-Code}!Yarn::Program@{Yarn\-::\-Program}}
\subsubsection[{Dump\-Code}]{\setlength{\rightskip}{0pt plus 5cm}string Yarn.\-Program.\-Dump\-Code (
\begin{DoxyParamCaption}
\item[{{\bf Library}}]{l}
\end{DoxyParamCaption}
)}}\label{a00126_a2f5bb468ce53eb7bbe647e3c11ddbb61}

\begin{DoxyCode}
88                                           \{
89 
90             var sb = \textcolor{keyword}{new} System.Text.StringBuilder ();
91 
92             \textcolor{keywordflow}{foreach} (var entry \textcolor{keywordflow}{in} \hyperlink{a00126_a3f4928a577c88263ad016be259b175c4}{nodes}) \{
93                 sb.AppendLine (\textcolor{stringliteral}{"Node "} + entry.Key + \textcolor{stringliteral}{":"});
94 
95                 \textcolor{keywordtype}{int} instructionCount = 0;
96                 \textcolor{keywordflow}{foreach} (var instruction \textcolor{keywordflow}{in} entry.Value.instructions) \{
97                     \textcolor{keywordtype}{string} instructionText;
98 
99                     \textcolor{keywordflow}{if} (instruction.operation == \hyperlink{a00031_ad5dfb6ee68ca7469623ad3e459f98894}{ByteCode}.Label) \{
100                         instructionText = instruction.ToString (\textcolor{keyword}{this}, l);
101                     \} \textcolor{keywordflow}{else} \{
102                         instructionText = \textcolor{stringliteral}{"    "} + instruction.ToString (\textcolor{keyword}{this}, l);
103                     \}
104 
105                     \textcolor{keywordtype}{string} preface;
106 
107                     \textcolor{keywordflow}{if} (instructionCount % 5 == 0 || instructionCount == entry.Value.instructions.Count - 1
      ) \{
108                         preface = string.Format (\textcolor{stringliteral}{"\{0,6\}   "}, instructionCount);
109                     \} \textcolor{keywordflow}{else} \{
110                         preface = string.Format (\textcolor{stringliteral}{"\{0,6\}   "}, \textcolor{stringliteral}{" "});
111                     \}
112 
113                     sb.AppendLine (preface + instructionText);
114 
115                     instructionCount++;
116                 \}
117 
118                 sb.AppendLine ();
119             \}
120 
121             sb.AppendLine (\textcolor{stringliteral}{"String table:"});
122 
123             \textcolor{keywordtype}{int} \hyperlink{a00126_a8ef1d10094ef00311aade6715ba78ec7}{stringCount} = 0;
124             \textcolor{keywordflow}{foreach} (var entry \textcolor{keywordflow}{in} \hyperlink{a00126_a91518fda7e41bf573f66c6946dd3b4cb}{strings}) \{
125 
126                 var \hyperlink{a00126_a0d4da395947767b4a1eaaff8a9842adc}{lineInfo} = this.lineInfo[entry.Key];
127 
128                 sb.AppendLine(string.Format(\textcolor{stringliteral}{"\{0\}: \{1\} (\{2\}:\{3\})"}, entry.Key, entry.Value, lineInfo.nodeName
      , lineInfo.lineNumber));
129 
130                 stringCount++;
131             \}
132 
133 
134             \textcolor{keywordflow}{return} sb.ToString ();
135         \}
\end{DoxyCode}
\hypertarget{a00126_a14737b93594c4aab25c59cb0a3c918f7}{\index{Yarn\-::\-Program@{Yarn\-::\-Program}!Get\-String@{Get\-String}}
\index{Get\-String@{Get\-String}!Yarn::Program@{Yarn\-::\-Program}}
\subsubsection[{Get\-String}]{\setlength{\rightskip}{0pt plus 5cm}string Yarn.\-Program.\-Get\-String (
\begin{DoxyParamCaption}
\item[{string}]{key}
\end{DoxyParamCaption}
)}}\label{a00126_a14737b93594c4aab25c59cb0a3c918f7}

\begin{DoxyCode}
82                                             \{
83             \textcolor{keywordtype}{string} value = null;
84             strings.TryGetValue (key, out value);
85             \textcolor{keywordflow}{return} value;
86         \}
\end{DoxyCode}
\hypertarget{a00126_aad8029f37832ff1985fad6a31e51afd8}{\index{Yarn\-::\-Program@{Yarn\-::\-Program}!Get\-Text\-For\-Node@{Get\-Text\-For\-Node}}
\index{Get\-Text\-For\-Node@{Get\-Text\-For\-Node}!Yarn::Program@{Yarn\-::\-Program}}
\subsubsection[{Get\-Text\-For\-Node}]{\setlength{\rightskip}{0pt plus 5cm}string Yarn.\-Program.\-Get\-Text\-For\-Node (
\begin{DoxyParamCaption}
\item[{string}]{node\-Name}
\end{DoxyParamCaption}
)}}\label{a00126_aad8029f37832ff1985fad6a31e51afd8}

\begin{DoxyCode}
137                                                       \{
138             \textcolor{keywordflow}{return} this.GetString (\hyperlink{a00126_a3f4928a577c88263ad016be259b175c4}{nodes} [nodeName].sourceTextStringID);
139         \}
\end{DoxyCode}
\hypertarget{a00126_afd3385ca1f7589b3b9dae3646e4fee84}{\index{Yarn\-::\-Program@{Yarn\-::\-Program}!Include@{Include}}
\index{Include@{Include}!Yarn::Program@{Yarn\-::\-Program}}
\subsubsection[{Include}]{\setlength{\rightskip}{0pt plus 5cm}void Yarn.\-Program.\-Include (
\begin{DoxyParamCaption}
\item[{{\bf Program}}]{other\-Program}
\end{DoxyParamCaption}
)}}\label{a00126_afd3385ca1f7589b3b9dae3646e4fee84}

\begin{DoxyCode}
142         \{
143             \textcolor{keywordflow}{foreach} (var otherNodeName \textcolor{keywordflow}{in} otherProgram.nodes) \{
144 
145                 \textcolor{keywordflow}{if} (\hyperlink{a00126_a3f4928a577c88263ad016be259b175c4}{nodes}.ContainsKey(otherNodeName.Key)) \{
146                     \textcolor{keywordflow}{throw} \textcolor{keyword}{new} InvalidOperationException (\textcolor{keywordtype}{string}.Format (\textcolor{stringliteral}{"This program already contains a
       node named \{0\}"}, otherNodeName.Key));
147                 \}
148 
149                 \hyperlink{a00126_a3f4928a577c88263ad016be259b175c4}{nodes} [otherNodeName.Key] = otherNodeName.Value;
150             \}
151 
152             \textcolor{keywordflow}{foreach} (var otherString \textcolor{keywordflow}{in} otherProgram.strings) \{
153 
154                 \textcolor{keywordflow}{if} (\hyperlink{a00126_a3f4928a577c88263ad016be259b175c4}{nodes}.ContainsKey(otherString.Key)) \{
155                     \textcolor{keywordflow}{throw} \textcolor{keyword}{new} InvalidOperationException (\textcolor{keywordtype}{string}.Format (\textcolor{stringliteral}{"This program already contains a
       string with key \{0\}"}, otherString.Key));
156                 \}
157 
158                 \hyperlink{a00126_a91518fda7e41bf573f66c6946dd3b4cb}{strings} [otherString.Key] = otherString.Value;
159             \}
160         \}
\end{DoxyCode}
\hypertarget{a00126_a977d1ed02e3f6f39d30dfea1663e7927}{\index{Yarn\-::\-Program@{Yarn\-::\-Program}!Load\-Strings@{Load\-Strings}}
\index{Load\-Strings@{Load\-Strings}!Yarn::Program@{Yarn\-::\-Program}}
\subsubsection[{Load\-Strings}]{\setlength{\rightskip}{0pt plus 5cm}void Yarn.\-Program.\-Load\-Strings (
\begin{DoxyParamCaption}
\item[{Dictionary$<$ string, string $>$}]{new\-Strings}
\end{DoxyParamCaption}
)}}\label{a00126_a977d1ed02e3f6f39d30dfea1663e7927}

\begin{DoxyCode}
56                                                                       \{
57             \textcolor{keywordflow}{foreach} (var entry \textcolor{keywordflow}{in} newStrings) \{
58                 \hyperlink{a00126_a91518fda7e41bf573f66c6946dd3b4cb}{strings} [entry.Key] = entry.Value;
59             \}
60         \}
\end{DoxyCode}
\hypertarget{a00126_a9baf491479375aa8c3aa2b0c31cf0932}{\index{Yarn\-::\-Program@{Yarn\-::\-Program}!Register\-String@{Register\-String}}
\index{Register\-String@{Register\-String}!Yarn::Program@{Yarn\-::\-Program}}
\subsubsection[{Register\-String}]{\setlength{\rightskip}{0pt plus 5cm}string Yarn.\-Program.\-Register\-String (
\begin{DoxyParamCaption}
\item[{string}]{the\-String, }
\item[{string}]{node\-Name, }
\item[{string}]{line\-I\-D, }
\item[{int}]{line\-Number, }
\item[{bool}]{localisable}
\end{DoxyParamCaption}
)}}\label{a00126_a9baf491479375aa8c3aa2b0c31cf0932}

\begin{DoxyCode}
62                                                                                                            
                    \{
63 
64             \textcolor{keywordtype}{string} key;
65 
66             \textcolor{keywordflow}{if} (lineID == null)
67                 key = string.Format (\textcolor{stringliteral}{"\{0\}-\{1\}"}, nodeName, \hyperlink{a00126_a8ef1d10094ef00311aade6715ba78ec7}{stringCount}++);
68             \textcolor{keywordflow}{else}
69                 key = lineID;
70 
71             \textcolor{comment}{// It's not in the list; append it}
72             strings.Add(key, theString);
73 
74             \textcolor{keywordflow}{if} (localisable) \{
75                 \textcolor{comment}{// Additionally, keep info about this string around}
76                 lineInfo.Add(key, \textcolor{keyword}{new} LineInfo(nodeName, lineNumber));
77             \}
78 
79             \textcolor{keywordflow}{return} key;
80         \}
\end{DoxyCode}


\subsection{Member Data Documentation}
\hypertarget{a00126_a0d4da395947767b4a1eaaff8a9842adc}{\index{Yarn\-::\-Program@{Yarn\-::\-Program}!line\-Info@{line\-Info}}
\index{line\-Info@{line\-Info}!Yarn::Program@{Yarn\-::\-Program}}
\subsubsection[{line\-Info}]{\setlength{\rightskip}{0pt plus 5cm}Dictionary$<$string, {\bf Line\-Info}$>$ Yarn.\-Program.\-line\-Info = new Dictionary$<$string, {\bf Line\-Info}$>$()\hspace{0.3cm}{\ttfamily [package]}}}\label{a00126_a0d4da395947767b4a1eaaff8a9842adc}
\hypertarget{a00126_a3f4928a577c88263ad016be259b175c4}{\index{Yarn\-::\-Program@{Yarn\-::\-Program}!nodes@{nodes}}
\index{nodes@{nodes}!Yarn::Program@{Yarn\-::\-Program}}
\subsubsection[{nodes}]{\setlength{\rightskip}{0pt plus 5cm}Dictionary$<$string, {\bf Node}$>$ Yarn.\-Program.\-nodes = new Dictionary$<$string, {\bf Node}$>$()\hspace{0.3cm}{\ttfamily [package]}}}\label{a00126_a3f4928a577c88263ad016be259b175c4}
\hypertarget{a00126_a8ef1d10094ef00311aade6715ba78ec7}{\index{Yarn\-::\-Program@{Yarn\-::\-Program}!string\-Count@{string\-Count}}
\index{string\-Count@{string\-Count}!Yarn::Program@{Yarn\-::\-Program}}
\subsubsection[{string\-Count}]{\setlength{\rightskip}{0pt plus 5cm}int Yarn.\-Program.\-string\-Count = 0\hspace{0.3cm}{\ttfamily [private]}}}\label{a00126_a8ef1d10094ef00311aade6715ba78ec7}
\hypertarget{a00126_a91518fda7e41bf573f66c6946dd3b4cb}{\index{Yarn\-::\-Program@{Yarn\-::\-Program}!strings@{strings}}
\index{strings@{strings}!Yarn::Program@{Yarn\-::\-Program}}
\subsubsection[{strings}]{\setlength{\rightskip}{0pt plus 5cm}Dictionary$<$string,string$>$ Yarn.\-Program.\-strings = new Dictionary$<$string, string$>$ ()\hspace{0.3cm}{\ttfamily [package]}}}\label{a00126_a91518fda7e41bf573f66c6946dd3b4cb}


\subsection{Property Documentation}
\hypertarget{a00126_aa8fedbfceaf931d1da3f600eaab6ae87}{\index{Yarn\-::\-Program@{Yarn\-::\-Program}!untagged\-Strings@{untagged\-Strings}}
\index{untagged\-Strings@{untagged\-Strings}!Yarn::Program@{Yarn\-::\-Program}}
\subsubsection[{untagged\-Strings}]{\setlength{\rightskip}{0pt plus 5cm}Dictionary$<$string, string$>$ Yarn.\-Program.\-untagged\-Strings\hspace{0.3cm}{\ttfamily [get]}, {\ttfamily [package]}}}\label{a00126_aa8fedbfceaf931d1da3f600eaab6ae87}


The documentation for this class was generated from the following file\-:\begin{DoxyCompactItemize}
\item 
Yarn\-Spinner/\hyperlink{a00264}{Compiler.\-cs}\end{DoxyCompactItemize}
